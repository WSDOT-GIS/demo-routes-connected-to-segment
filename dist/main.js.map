{"version":3,"sources":["webpack://arcgis-2d-spa-template/./src/RouteControl.ts","webpack://arcgis-2d-spa-template/./src/main.ts","webpack://arcgis-2d-spa-template/./node_modules/tslib/tslib.es6.js","webpack://arcgis-2d-spa-template/./node_modules/wsdot-elc/dist/FormatError.js","webpack://arcgis-2d-spa-template/./node_modules/wsdot-elc/dist/Route.js","webpack://arcgis-2d-spa-template/./node_modules/wsdot-elc/dist/RouteId.js","webpack://arcgis-2d-spa-template/./node_modules/wsdot-elc/dist/RouteLocation.js","webpack://arcgis-2d-spa-template/./node_modules/wsdot-elc/dist/RouteLocator.js","webpack://arcgis-2d-spa-template/./node_modules/wsdot-elc/dist/index.js","webpack://arcgis-2d-spa-template/./node_modules/wsdot-elc/dist/lrsTypeUtils.js","webpack://arcgis-2d-spa-template/./node_modules/wsdot-elc/dist/routeTypeUtils.js","webpack://arcgis-2d-spa-template/./node_modules/wsdot-elc/dist/routeUtils.js","webpack://arcgis-2d-spa-template/external \"esri/Map\"","webpack://arcgis-2d-spa-template/external \"esri/geometry/Extent\"","webpack://arcgis-2d-spa-template/external \"esri/views/MapView\"","webpack://arcgis-2d-spa-template/external \"esri/widgets/Search\"","webpack://arcgis-2d-spa-template/webpack/bootstrap","webpack://arcgis-2d-spa-template/webpack/startup","webpack://arcgis-2d-spa-template/webpack/runtime/compat get default export","webpack://arcgis-2d-spa-template/webpack/runtime/define property getters","webpack://arcgis-2d-spa-template/webpack/runtime/hasOwnProperty shorthand","webpack://arcgis-2d-spa-template/webpack/runtime/make namespace object"],"names":["sort","a","b","aS","Number","routeId","sr","bS","sortByRrq","rrqA","rrqB","map","r","mainlineIntersectionMP","basemap","waExtent","xmin","ymin","xmax","ymax","view","container","extent","search","includeDefaultSources","sources","locator","url","filter","geometry","countryCode","ui","add","RouteLocator","getRouteList","then","routes","console","group","debug","Error","currentRoutes","Current","routeControl","form","document","createElement","classList","label","innerText","routeSelect","id","htmlFor","appendChild","mainlineRoutes","isMainline","option","value","toString","options","stopType","textbox","type","min","step","required","submitButton","addEventListener","ev","preventDefault","selectedRoute","selectedOptions","customEvent","CustomEvent","detail","route","beginSrmp","querySelector","endSrmp","dispatchEvent","createRouteControl","groupEnd","evt","routeSegment","name","connectedRoutes","getRoutesConnectedToRouteSegment","message","description","join","alert","error","extendStatics","d","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","this","constructor","prototype","create","__assign","assign","t","s","i","n","arguments","length","call","apply","__rest","e","indexOf","getOwnPropertySymbols","propertyIsEnumerable","__decorate","decorators","target","key","desc","c","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","__metadata","metadataKey","metadataValue","metadata","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","next","rejected","result","done","__generator","body","f","y","g","_","sent","trys","ops","verb","Symbol","iterator","v","op","TypeError","pop","push","__createBinding","o","m","k","k2","undefined","__exportStar","exports","__values","__read","ar","__spread","concat","__spreadArrays","il","j","jl","__await","__asyncGenerator","asyncIterator","q","resume","fulfill","settle","shift","__asyncDelegator","__asyncValues","__makeTemplateObject","cooked","raw","__importStar","mod","__esModule","default","__importDefault","__classPrivateFieldGet","receiver","privateMap","has","get","__classPrivateFieldSet","set","tslib_1","FormatError","_super","expectedFormat","_this","FormatError_1","lrsTypeUtils_1","RouteId_1","routeTypeUtils_1","reviver","output","test","trim","currentValue","Route","direction","routeType","parseRoutes","json","JSON","parse","lrsTypesValue","_name","_lrsTypes","getLrsTypeValue","_routeType","getRouteTypeValue","_routeId","enumerable","configurable","rrt","abbrev","routeTypeAbbreviation","routeNum","parseInt","String","getRouteTypeAbbreviation","LrsType","INCREASE","BOTH","lrsTypes","DECREASE","RAMP","routeRe","rrtDefinitions","AR","CD","CO","CI","FI","FD","LX","RL","SP","TB","TR","PR","FS","FT","UC","HI","HD","rampTypes","Q","R","S","rrqAbbreviations","ABERDN","ANACOR","ANACRT","ANAFT2","AURORA","BOONE","BREMER","BROWNE","BURKE","CANBY","CEDRWY","CLEELM","CLINTN","COLFAX","COUGAR","COUPLT","COUPVL","CRWNPT","CS0631","DIVISN","EAGHBR","EDMOND","EVERET","FAUNTL","FIFE","FRIDAY","GNESSE","GORST","HERON","HQUIAM","HYAK","KELRNO","KELRSO","KELSO","KINFT1","KINGST","KNGSTN","LEAHY","LONNGR","LOPEZ","MARYHL","MKLTEO","MONROE","MORA","MTBAKR","MUKILT","NEWPRT","NSC","OLD504","OMAK","ORCAS","ORGBEG","ORGMID","ORGSPR","ORONDO","OSO","PAINE","PEARL","PRTANG","PTDEFI","PTTFT2","PTTOWN","PULLMN","PURDY","REDMND","SEATAC","SEATTL","SHAW","SIDNEY","SLVRDL","SOUTHW","SUMAS","TAHLEQ","TUNNEL","UNDRWD","VANCVR","VASHON","VIADCT","WALULA","WENTCH","WESTPT","WINSLO","XBASE","YELMLP","RouteId","match","_sr","_rrt","_rrq","rrq","sa","sb","rrtDescription","rrqDescription","routeUtils_1","srmpRe","RouteLocation","propName","Id","Decrease","Arm","Srmp","Back","ReferenceDate","ResponseDate","RealignmentDate","EndArm","EndSrmp","EndBack","EndReferenceDate","EndResponseDate","EndRealignmentDate","ArmCalcReturnCode","ArmCalcEndReturnCode","ArmCalcReturnMessage","ArmCalcEndReturnMessage","LocatingError","RouteGeometry","EventPoint","Distance","Angle","Date","isLine","toJSON","numFieldRe","srmpFieldRe","boolFieldRe","dateFieldRe","prop","getActualMonth","getDate","getFullYear","toNumber","exec","Boolean","Route_1","RouteLocation_1","toQueryString","name_1","encodeURIComponent","isUrlTooLong","maxLength","routeLocationReviver","findRouteLocationsOperationName","findNearestRouteLocationsOperationName","routesResourceName","layerList","useCors","queryData","response","data","_a","_b","callback","fetch","status","text","code","statusText","findRouteLocations","params","locations","referenceDate","outSR","lrsYear","formData","method","init","headers","_c","stringify","Headers","append","mode","findNearestRouteLocations","elcParams","date","coordinates","flattenArray","searchRadius","inSR","routeFilter","RouteLocator_1","TURNBACK","RouteTypes","routeTypeAbbrevKeys","routeClassRe","SR","IS","US","RA","LC","CN","Math","trunc","toUpperCase","isNaN","getMonth","array","outArray","l","element","array2","module","__WEBPACK_EXTERNAL_MODULE__254__","__WEBPACK_EXTERNAL_MODULE__481__","__WEBPACK_EXTERNAL_MODULE__591__","__WEBPACK_EXTERNAL_MODULE__701__","__webpack_module_cache__","__webpack_require__","moduleId","__webpack_modules__","getter","definition","obj","toStringTag"],"mappings":"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","file":"main.js","sourcesContent":["import { Route } from \"wsdot-elc\";\r\n\r\nexport interface IRouteSegment {\r\n    route: Route,\r\n    beginSrmp: number,\r\n    endSrmp: number\r\n}\r\n\r\nexport function getRoutesConnectedToRouteSegment(routeSegment: IRouteSegment, routes: Route[]): Route[] {\r\n    // Get mainline route SR\r\n    const { route, beginSrmp, endSrmp } = routeSegment;\r\n\r\n    const sr = route.routeId.sr;\r\n\r\n    const routesInRange = routes.filter(\r\n        r => r.routeId.sr === sr && (\r\n            typeof(r.routeId.mainlineIntersectionMP) === \"number\" && beginSrmp <= r.routeId.mainlineIntersectionMP && r.routeId.mainlineIntersectionMP <= endSrmp)\r\n    ).sort(sortByRrq);\r\n\r\n    return routesInRange;\r\n}\r\n\r\n/**\r\n * Sorting function for mainline Route objects only.\r\n * @param a First {@type Route} to compare\r\n * @param b Second {@type Route} to compare\r\n */\r\nfunction sort(a: Route, b: Route): number {\r\n    // Get the route IDs\r\n    const aS = Number(a.routeId.sr);\r\n    const bS = Number(b.routeId.sr);\r\n    return aS === bS ? 0 : aS > bS ? 1 : -1;\r\n}\r\n\r\nfunction sortByRrq(a: Route, b: Route): number {\r\n    const [rrqA, rrqB] = [a, b].map(r => r.routeId.mainlineIntersectionMP as number);\r\n    return rrqA === rrqB ? 0 : rrqA > rrqB ? 1 : -1;\r\n}\r\n\r\nexport function createRouteControl(routes: Route[]): HTMLFormElement {\r\n    const form = document.createElement(\"form\");\r\n\r\n    form.classList.add(\"esri-widget\")\r\n\r\n    const label = document.createElement(\"label\");\r\n    label.innerText = \"Select a route\"\r\n    const routeSelect = document.createElement(\"select\");\r\n    routeSelect.id = label.htmlFor = \"routeSelect\";\r\n\r\n    form.appendChild(label);\r\n    form.appendChild(routeSelect);\r\n\r\n    // Filter the list of routes to just the mainline ones, then sort.\r\n    const mainlineRoutes = routes.filter(r => r.isMainline).sort(sort);\r\n\r\n    // Create options for each route.\r\n    for (const r of mainlineRoutes) {\r\n\r\n        const option = document.createElement(\"option\");\r\n\r\n        option.label = r.label;\r\n        option.value = r.routeId.toString();\r\n\r\n        routeSelect.options.add(option);\r\n    }\r\n\r\n    // SRMP controls\r\n\r\n    for (const stopType of [\"begin\", \"end\"]) {\r\n        const label = document.createElement(\"label\");\r\n        const textbox = document.createElement(\"input\");\r\n        textbox.type = \"number\";\r\n        textbox.min = \"0\";\r\n        textbox.step = \"0.001\";\r\n        label.innerText = \"Begin SRMP\"\r\n\r\n        label.innerText = `${stopType} SRMP`;\r\n        textbox.id = label.htmlFor = `${stopType}SrmpInput`;\r\n\r\n        textbox.required = true;\r\n\r\n        form.appendChild(label);\r\n        form.appendChild(textbox);\r\n    }\r\n\r\n\r\n    const submitButton = document.createElement(\"button\");\r\n    submitButton.type = \"submit\";\r\n    submitButton.innerText = \"Submit\";\r\n    form.appendChild(submitButton);\r\n\r\n    form.addEventListener(\"submit\", ev => {\r\n        ev.preventDefault();\r\n\r\n        const selectedRoute = mainlineRoutes.filter(\r\n            r => r.routeId.toString() === routeSelect.selectedOptions[0].value)[0];\r\n\r\n        const customEvent = new CustomEvent<IRouteSegment>(\"route-selected\", {\r\n            detail: {\r\n                route: selectedRoute,\r\n                beginSrmp: Number(form.querySelector<HTMLSelectElement>(\"#beginSrmpInput\")?.value),\r\n                endSrmp: Number(form.querySelector<HTMLSelectElement>(\"#endSrmpInput\")?.value),\r\n            }\r\n        });\r\n        form.dispatchEvent(customEvent);\r\n    })\r\n\r\n\r\n    return form;\r\n}","import Extent from \"esri/geometry/Extent\";\r\nimport EsriMap from \"esri/Map\";\r\nimport MapView from \"esri/views/MapView\";\r\nimport Search from \"esri/widgets/Search\";\r\nimport { RouteLocator } from \"wsdot-elc\";\r\nimport { createRouteControl, IRouteSegment, getRoutesConnectedToRouteSegment } from \"./RouteControl\";\r\n\r\nconst map = new EsriMap({\r\n  basemap: \"topo-vector\"\r\n});\r\n\r\n/**\r\n * The extent of WA.\r\n * @see {https://epsg.io/1416-area}\r\n */\r\nconst waExtent = new Extent({\r\n  xmin: -124.79,\r\n  ymin: 45.54,\r\n  xmax: -116.91,\r\n  ymax: 49.05\r\n});\r\n\r\nconst view = new MapView({\r\n  container: \"viewDiv\",\r\n  map,\r\n  extent: waExtent\r\n});\r\n\r\nconst search = new Search({\r\n  view,\r\n  // This search is configured to only search within the extent of WA.\r\n  // To get the default behavior, change \"includeDefaultSources\" to\r\n  // true and remove the \"sources\" property.\r\n  includeDefaultSources: false,\r\n  sources: [\r\n    {\r\n      locator: {\r\n        url:\r\n          \"http://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer\"\r\n      },\r\n      filter: {\r\n        geometry: waExtent\r\n      } as __esri.SearchSourceFilter,\r\n      countryCode: \"US\"\r\n    } as __esri.LocatorSearchSource\r\n  ]\r\n});\r\n\r\nview.ui.add(search, \"top-right\");\r\n\r\nconst routeLocator = new RouteLocator();\r\n\r\nrouteLocator.getRouteList(true).then(routes => {\r\n  console.group(\"Get Route List\");\r\n  console.debug(\"routes\", routes);\r\n  \r\n  if (routes === null) {\r\n    throw new Error(\"null routes\")\r\n  }\r\n\r\n  const currentRoutes = routes.Current;\r\n  console.debug(\"current routes\", currentRoutes);\r\n\r\n  const routeControl = createRouteControl(currentRoutes);\r\n\r\n  view.ui.add(routeControl, \"top-right\");\r\n  \r\n  console.groupEnd();\r\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n  routeControl.addEventListener(\"route-selected\", (evt: any) => {\r\n    const customEvent = evt as CustomEvent<IRouteSegment>\r\n    const routeSegment = customEvent.detail;\r\n    const {route, beginSrmp, endSrmp} = routeSegment;\r\n    console.debug(`Selected route is ${route.name} @ ${beginSrmp} - ${endSrmp}`, customEvent);\r\n\r\n    const connectedRoutes = getRoutesConnectedToRouteSegment(routeSegment, currentRoutes);\r\n\r\n    console.debug(\"connected routes\", connectedRoutes);\r\n\r\n    const message = connectedRoutes.map(r => `${r.routeId.description} (${r.name})`).join(\"\\n\");\r\n\r\n    alert(`Connected routes are\\n${message}`)\r\n  });\r\n}, error => {\r\n  console.error(error);\r\n})\r\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\n/**\r\n * An error that is thrown when a string is not in the expected format.\r\n */\r\nvar FormatError = /** @class */ (function (_super) {\r\n    tslib_1.__extends(FormatError, _super);\r\n    function FormatError(value, expectedFormat) {\r\n        var _this = this;\r\n        var message = \"Not in expected format: \\\"\" + value + \"\\\".\";\r\n        if (expectedFormat) {\r\n            message += \" Expected format: \" + expectedFormat;\r\n        }\r\n        _this = _super.call(this, message) || this;\r\n        _this.value = value;\r\n        _this.expectedFormat = expectedFormat || null;\r\n        return _this;\r\n    }\r\n    return FormatError;\r\n}(Error));\r\nexports.default = FormatError;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar FormatError_1 = require(\"./FormatError\");\r\nvar lrsTypeUtils_1 = require(\"./lrsTypeUtils\");\r\nvar RouteId_1 = require(\"./RouteId\");\r\nvar routeTypeUtils_1 = require(\"./routeTypeUtils\");\r\n/**\r\n * A module representing a WSDOT route.\r\n * @module Route\r\n */\r\nfunction reviver(k, v) {\r\n    var output;\r\n    if (/^(?:(?:Current)|(?:\\d{4,8}))$/.test(k)) {\r\n        output = [];\r\n        for (var routeId in v) {\r\n            if (v.hasOwnProperty(routeId) && routeId.trim()) {\r\n                var currentValue = v[routeId];\r\n                var route = null;\r\n                try {\r\n                    if (typeof currentValue === \"number\") {\r\n                        route = new Route(routeId, currentValue);\r\n                    }\r\n                    else if (currentValue.hasOwnProperty(\"routeType\")) {\r\n                        route = new Route(routeId, currentValue.direction, currentValue.routeType);\r\n                    }\r\n                }\r\n                catch (error) {\r\n                    if (!(error instanceof FormatError_1.default)) {\r\n                        throw error;\r\n                    }\r\n                }\r\n                if (route) {\r\n                    output.push(route);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    else {\r\n        output = v;\r\n    }\r\n    return output;\r\n}\r\n/**\r\n * Parses a JSON representation of a Route (or an object containing Route properties)\r\n * into corresponding Route objects.\r\n * @param {string} json - JSON string\r\n * @returns {Object} The input JSON string parsed into an Object\r\n */\r\nfunction parseRoutes(json) {\r\n    return JSON.parse(json, reviver);\r\n}\r\nexports.parseRoutes = parseRoutes;\r\n/**\r\n * Represents a state route.\r\n * @param name - The name of the route.\r\n * @param lrsTypesValue -\r\n * @param routeType -The type of route. E.g., \"SR\", \"IS\", \"US\", \"RA\"\r\n */\r\nvar Route = /** @class */ (function () {\r\n    /**\r\n     * Creates a Route object.\r\n     * @param name - The name of the route.\r\n     * @param lrsTypesValue - LRS type\r\n     * @param routeType -The type of route. E.g., \"SR\", \"IS\", \"US\", \"RA\"\r\n     */\r\n    function Route(name, lrsTypesValue, routeType) {\r\n        this._name = name;\r\n        this._lrsTypes = lrsTypeUtils_1.getLrsTypeValue(lrsTypesValue);\r\n        this._routeType = routeType != null ? routeTypeUtils_1.getRouteTypeValue(routeType) : null;\r\n        this._routeId = new RouteId_1.default(this._name);\r\n    }\r\n    Object.defineProperty(Route.prototype, \"name\", {\r\n        /* @member {string} name The name of the route. */\r\n        get: function () {\r\n            return this._name;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Route.prototype, \"isMainline\", {\r\n        get: function () {\r\n            return !this.routeId.rrt;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Route.prototype, \"label\", {\r\n        /**\r\n         * Text label including route type, if available.\r\n         */\r\n        get: function () {\r\n            var output;\r\n            var abbrev = this.routeTypeAbbreviation;\r\n            var routeNum = parseInt(this.routeId.sr, 10);\r\n            if (abbrev) {\r\n                if (abbrev === \"SR\") {\r\n                    output = \"WA-\" + routeNum;\r\n                }\r\n                else if (abbrev === \"US\") {\r\n                    output = abbrev + \"-\" + routeNum;\r\n                }\r\n                else if (abbrev === \"IS\") {\r\n                    output = \"I-\" + routeNum;\r\n                }\r\n            }\r\n            if (!output) {\r\n                output = String(routeNum);\r\n            }\r\n            return output;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Route.prototype, \"lrsTypes\", {\r\n        /* @property {number} lrsTypes An integer from 1 to 4, corresponding to one of the following constants:\r\n         *      {@link LrsType.INCREASE},\r\n         *      {@link LrsType.DECREASE},\r\n         *      {@link LrsType.BOTH},\r\n         *      {@link LrsType.RAMP}\r\n         */\r\n        get: function () {\r\n            return this._lrsTypes;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Route.prototype, \"routeType\", {\r\n        get: function () {\r\n            return this._routeType;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Route.prototype, \"routeTypeAbbreviation\", {\r\n        get: function () {\r\n            return this.routeType !== null\r\n                ? routeTypeUtils_1.getRouteTypeAbbreviation(this.routeType)\r\n                : null;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Route.prototype, \"routeId\", {\r\n        get: function () {\r\n            return this._routeId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Route.prototype, \"isIncrease\", {\r\n        /**\r\n         * Returns a boolean value indicating whether the route is increase.\r\n         * @return {boolean} Returns true if {@link Route#lrsTypes} equals\r\n         * {@link LrsType.INCREASE} or {@link LrsType.BOTH}.\r\n         */\r\n        get: function () {\r\n            return (this._lrsTypes === lrsTypeUtils_1.LrsType.INCREASE || this._lrsTypes === lrsTypeUtils_1.LrsType.BOTH);\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Route.prototype, \"isDecrease\", {\r\n        /**\r\n         * Returns a boolean value indicating whether the route is decrease.\r\n         * @return {boolean} Returns true if {@link Route#lrsTypes} equals\r\n         * {@link LrsType.DECREASE} or {@link LrsType.BOTH}.\r\n         */\r\n        get: function () {\r\n            return this.lrsTypes === lrsTypeUtils_1.LrsType.DECREASE || this.lrsTypes === lrsTypeUtils_1.LrsType.BOTH;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Route.prototype, \"isBoth\", {\r\n        /**\r\n         * Returns a boolean value indicating whether the route is both increase and decrease.\r\n         * @return {boolean} Returns true if {@link Route#lrsTypes} equals {@link LrsType.BOTH}.\r\n         */\r\n        get: function () {\r\n            return this.lrsTypes === lrsTypeUtils_1.LrsType.BOTH;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Route.prototype, \"isRamp\", {\r\n        /**\r\n         * Returns a boolean value indicating whether the route is a ramp.\r\n         * @return {boolean} Returns true if {@link Route#lrsTypes} equals {@link LrsType.RAMP}\r\n         */\r\n        get: function () {\r\n            return this.lrsTypes === lrsTypeUtils_1.LrsType.RAMP;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return Route;\r\n}());\r\nexports.default = Route;\r\n","\"use strict\";\r\n/**\r\n * Represents a WSDOT State Route Identifier\r\n * @module RouteId\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar FormatError_1 = require(\"./FormatError\");\r\n/**\r\n * Matches a state route ID.  Regex.exec will return an array with four elements: the entire route name, SR, RRT, and RRQ\r\n * @author Jeff Jacobson\r\n */\r\n// routeRe = /^(\\d{3})(?:((?:AR)|(?:[CH][DI])|(?:C[O])|(?:F[DI])|(?:LX)|(?:[PQRS][\\dU])|(?:RL)|(?:SP)|(?:TB)|(?:TR)|(?:PR)|(?:F[UST])|(?:ML)|(?:UC))([A-Z0-9]{0,6}))?$/i;\r\nexports.routeRe = /^(\\d{3})(?:([A-Z0-9]{2})([A-Z0-9]{0,6}))?/i;\r\n/*\r\n== RRTs (Related Roadway Type)==\r\nAR Alternate Route\r\nCD Collector Distributor (Dec)\r\nCI Collector Distributor (Inc)\r\nCO Couplet\r\nFI Frontage Road (Inc)\r\nFD Frontage Road (Dec)\r\nLX Crossroad within Interchange\r\nRL Reversible Lane\r\nSP Spur\r\nTB Transitional Turnback\r\nTR Temporary Route\r\nPR Proposed Route\r\n\r\nUC Under Construction\r\n\r\n===Ramps===\r\nP1 - P9 Off Ramp (Inc)\r\nPU Extension of P ramp\r\nQ1 - Q9 On Ramp (Inc)\r\nQU Extension of Q ramp\r\nR1 - R9 Off Ramp (Dec)\r\nRU Extension of R ramp\r\nS1 - S9 On Ramp (Dec)\r\nSU Extension of S ramp\r\n\r\n==Ferries==\r\nFS Ferry Ship (Boat)\r\nFT Ferry Terminal\r\n\r\n*/\r\nvar rrtDefinitions = {\r\n    AR: \"Alternate Route\",\r\n    CD: \"Collector Distributor (Dec)\",\r\n    CO: \"Couplet\",\r\n    CI: \"Collector Distributor (Inc)\",\r\n    FI: \"Frontage Road (Inc)\",\r\n    FD: \"Frontage Road (Dec)\",\r\n    LX: \"Crossroad within Interchange\",\r\n    RL: \"Reversible Lane\",\r\n    SP: \"Spur\",\r\n    TB: \"Transitional Turnback\",\r\n    TR: \"Temporary Route\",\r\n    PR: \"Proposed Route\",\r\n    FS: \"Ferry Ship (Boat)\",\r\n    FT: \"Ferry Terminal\",\r\n    UC: \"Under Construction\",\r\n    HI: \"Grade-Separated HOV (Inc)\",\r\n    HD: \"Grade-Separated HOV (Dec)\"\r\n};\r\nvar rampTypes = {\r\n    P: \"Off Ramp (Inc)\",\r\n    Q: \"On Ramp (Inc)\",\r\n    R: \"Off Ramp (Dec)\",\r\n    S: \"On Ramp (Dec)\"\r\n};\r\nfor (var key in rampTypes) {\r\n    if (rampTypes.hasOwnProperty(key)) {\r\n        var desc = rampTypes[key];\r\n        var newKey = void 0;\r\n        for (var i = 1, l = 10; i < l; i += 1) {\r\n            newKey = \"\" + key + i;\r\n            rrtDefinitions[newKey] = desc + \" \" + i;\r\n        }\r\n        newKey = key + \"U\";\r\n        rrtDefinitions[newKey] = \"Extension of \" + key + \" ramp\";\r\n    }\r\n}\r\nvar rrqAbbreviations = {\r\n    \"2NDST\": \"2nd St.\",\r\n    \"3RDAVE\": \"3rd Ave.\",\r\n    \"6THST\": \"6th St.\",\r\n    ABERDN: \"Aberdeen\",\r\n    ANACOR: \"Anacortes\",\r\n    ANACRT: \"Anacortes\",\r\n    ANAFT2: \"ANAFT2\",\r\n    AURORA: \"Aurora\",\r\n    BOONE: \"Boone St.\",\r\n    // \"BREFT2\": \"BREFT2\",\r\n    BREMER: \"Bremerton\",\r\n    BROWNE: \"Browne St.\",\r\n    BURKE: \"Beverly Burke Rd.\",\r\n    CANBY: \"Fort Canby\",\r\n    CEDRWY: \"Cedar Way\",\r\n    CLEELM: \"Cle Elem\",\r\n    // \"CLIFT2\": \"CLIFT2\",\r\n    CLINTN: \"Clifton\",\r\n    COLFAX: \"Colfax\",\r\n    COUGAR: \"Cougar\",\r\n    COUPLT: \"COUPLT\",\r\n    COUPVL: \"Coupville\",\r\n    CRWNPT: \"Crown Point\",\r\n    CS0631: \"CS0631\",\r\n    DIVISN: \"Division\",\r\n    EAGHBR: \"Eagle Harbor\",\r\n    EDMOND: \"Edmonds\",\r\n    EVERET: \"Everett\",\r\n    FAUNTL: \"Fauntleroy\",\r\n    FIFE: \"Fife\",\r\n    FRIDAY: \"Friday Harbor\",\r\n    GNESSE: \"GNESSE\",\r\n    GORST: \"Gorst\",\r\n    HERON: \"Heron St.\",\r\n    HQUIAM: \"Hoquiam\",\r\n    HYAK: \"Hyak Dr.\",\r\n    KELRNO: \"Keller North\",\r\n    KELRSO: \"Keller South\",\r\n    KELSO: \"Kelso\",\r\n    KINFT1: \"KINFT1\",\r\n    KINGST: \"Kingston\",\r\n    KNGSTN: \"Kingston\",\r\n    LEAHY: \"Leahy\",\r\n    LONNGR: \"LONNGR\",\r\n    LOPEZ: \"Lopez\",\r\n    MARYHL: \"Maryhill\",\r\n    MKLTEO: \"Mukilteo\",\r\n    MONROE: \"Monroe\",\r\n    MORA: \"Mora Rd.\",\r\n    MTBAKR: \"Mt. Baker\",\r\n    MUKILT: \"Mukilteo\",\r\n    NEWPRT: \"Newport\",\r\n    NSC: \"NSC\",\r\n    OLD504: \"Old 504\",\r\n    OMAK: \"Omak\",\r\n    ORCAS: \"Orcas Island\",\r\n    ORGBEG: \"ORGBEG\",\r\n    ORGMID: \"ORGMID\",\r\n    ORGSPR: \"ORGSPR\",\r\n    ORONDO: \"Orondo\",\r\n    OSO: \"Oso\",\r\n    PAINE: \"Paine\",\r\n    PEARL: \"Pearl St.\",\r\n    PRTANG: \"Port Angeles\",\r\n    PTDEFI: \"Pt. Defiance\",\r\n    PTTFT2: \"PTTFT2\",\r\n    PTTOWN: \"Port Townsend\",\r\n    PULLMN: \"Pullman\",\r\n    PURDY: \"Purdy Ln.\",\r\n    REDMND: \"Redmond\",\r\n    // \"SEAFT2\": \"SEAFT2\",\r\n    // \"SEAFT3\": \"SEAFT3\",\r\n    SEATAC: \"SeaTac\",\r\n    SEATTL: \"Seattle\",\r\n    SHAW: \"Shaw Island\",\r\n    SIDNEY: \"Sidney\",\r\n    SLVRDL: \"Silverdale\",\r\n    SOUTHW: \"Southworth\",\r\n    SUMAS: \"Sumas\",\r\n    TAHLEQ: \"Tahlequa\",\r\n    TUNNEL: \"Tunnel\",\r\n    UNDRWD: \"Underwood\",\r\n    VANCVR: \"Vancouver\",\r\n    // \"VASFT2\": \"VASFT2\",\r\n    VASHON: \"Vashon\",\r\n    VIADCT: \"Alaskan Way Viaduct\",\r\n    WALULA: \"Wallula Junction\",\r\n    WENTCH: \"Wenatchee\",\r\n    WESTPT: \"Westport\",\r\n    // \"WINFT2\": \"WINFT2\",\r\n    WINSLO: \"Winslow\",\r\n    XBASE: \"XBASE\",\r\n    YELMLP: \"Yelm Loop\"\r\n};\r\nvar RouteId = /** @class */ (function () {\r\n    /**\r\n     * Splits a state route ID into SR, RRT, RRQ components.\r\n     * @constructor\r\n     * @param {string} routeId - Identifier for a WA state route\r\n     * @alias module:RouteId\r\n     */\r\n    function RouteId(routeId) {\r\n        routeId = routeId.trim();\r\n        var match;\r\n        if (!routeId) {\r\n            throw new TypeError(\"No route ID was provided.\");\r\n        }\r\n        match = routeId.match(exports.routeRe);\r\n        if (!match) {\r\n            throw new FormatError_1.default(routeId, exports.routeRe);\r\n        }\r\n        this._sr = match[1];\r\n        this._rrt = match[2] || null;\r\n        this._rrq = match[3] || null;\r\n    }\r\n    /**\r\n     * A comparison method used for sorting {@link RouteId} objects.\r\n     * @param {RouteId} a - RouteId object to be compared\r\n     * @param {RouteId} b - RouteId object to be compared\r\n     * @returns {number} Returns a value indicating if a should be before b or vice-versa.\r\n     */\r\n    RouteId.sort = function (a, b) {\r\n        if (a.sr > b.sr) {\r\n            return 1;\r\n        }\r\n        else if (a.sr < b.sr) {\r\n            return -1;\r\n        }\r\n        else if (a.rrq !== null && b.rrq !== null) {\r\n            if (a.rrq === b.rrq) {\r\n                return 0;\r\n            }\r\n            else if (a.mainlineIntersectionMP === null &&\r\n                b.mainlineIntersectionMP !== null) {\r\n                return -1;\r\n            }\r\n            else if (a.mainlineIntersectionMP !== null &&\r\n                b.mainlineIntersectionMP === null) {\r\n                return 1;\r\n            }\r\n            else if (a.rrq > b.rrq) {\r\n                return 1;\r\n            }\r\n            else {\r\n                return -1;\r\n            }\r\n        }\r\n        else {\r\n            var sa = a.toString();\r\n            var sb = b.toString();\r\n            if (sa === sb) {\r\n                return 0;\r\n            }\r\n            else if (sa > sb) {\r\n                return 1;\r\n            }\r\n            else {\r\n                return -1;\r\n            }\r\n        }\r\n    };\r\n    Object.defineProperty(RouteId.prototype, \"sr\", {\r\n        get: function () {\r\n            return this._sr;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RouteId.prototype, \"rrt\", {\r\n        get: function () {\r\n            return this._rrt;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RouteId.prototype, \"rrq\", {\r\n        get: function () {\r\n            return this._rrq;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RouteId.prototype, \"rrtDescription\", {\r\n        get: function () {\r\n            return this._rrt ? rrtDefinitions[this._rrt] : null;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RouteId.prototype, \"rrqDescription\", {\r\n        /**\r\n         * Description of the route ID's RRQ portion, if it exists. Null otherwise.\r\n         */\r\n        get: function () {\r\n            var output = null;\r\n            if (this._rrq !== null) {\r\n                if (rrqAbbreviations[this._rrq]) {\r\n                    output = rrqAbbreviations[this._rrq];\r\n                }\r\n                else {\r\n                    var n = this.mainlineIntersectionMP;\r\n                    if (n !== null) {\r\n                        output = \" @ MP \" + n;\r\n                    }\r\n                    else {\r\n                        output = this._rrq;\r\n                    }\r\n                }\r\n            }\r\n            return output;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RouteId.prototype, \"description\", {\r\n        /**\r\n         * Extended description of the route ID.\r\n         */\r\n        get: function () {\r\n            var label;\r\n            if (!this._rrt) {\r\n                label = [this._sr, \"Mainline\"].join(\" \");\r\n            }\r\n            else if (!this._rrq) {\r\n                label = [this._sr, this.rrtDescription].join(\" \");\r\n            }\r\n            else if (this.mainlineIntersectionMP !== null) {\r\n                label = [\r\n                    this._sr,\r\n                    this.rrtDescription,\r\n                    \"@ MP\",\r\n                    this.mainlineIntersectionMP\r\n                ].join(\" \");\r\n            }\r\n            else {\r\n                label = [this._sr, this.rrtDescription, this.rrqDescription].join(\" \");\r\n            }\r\n            return label;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(RouteId.prototype, \"mainlineIntersectionMP\", {\r\n        /**\r\n         * The milepost on the mainline route where this route attaches.\r\n         * Will be null if the RRQ is non-numeric.\r\n         */\r\n        get: function () {\r\n            var i = null;\r\n            var re = /^(\\d+)([BCRS])?$/i;\r\n            var match = this._rrq ? this._rrq.match(re) : null;\r\n            if (match) {\r\n                i = parseInt(match[1], 10);\r\n                i = i / 100;\r\n                if (match[2]) {\r\n                    i = [i, match[2]].join(\"\");\r\n                }\r\n            }\r\n            return i;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Returns a string representation of the RouteID.\r\n     * @returns {string} - Returns the route identifier string.\r\n     */\r\n    RouteId.prototype.toString = function () {\r\n        var output = [this.sr];\r\n        if (this.rrt) {\r\n            output.push(this.rrt);\r\n            if (this.rrq) {\r\n                output.push(this.rrq);\r\n            }\r\n        }\r\n        return output.join(\"\");\r\n    };\r\n    return RouteId;\r\n}());\r\nexports.default = RouteId;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar RouteId_1 = require(\"./RouteId\");\r\nvar routeUtils_1 = require(\"./routeUtils\");\r\n/**\r\n * Matches an SRMP value.  Either just a number or a number with a B at the end (indicating back mileage).\r\n * @author Jeff Jacobson\r\n * @memberOf $.wsdot.elc\r\n */\r\nvar srmpRe = /^([\\d\\.]+)(B)?$/i;\r\n/**\r\n * A class representing either a point or a segment on a WSDOT State Route.\r\n * @class A class representing either a point or a segment on a WSDOT State Route.\r\n * @member {number} Id Since the Find Nearest Route Location method does not return records for locations where it could not find any routes within the search parameters, this ID parameter can be used to indicate which source location a route location corresponds to.\r\n * @member {string} Route An 3 to 11 digit state route identifier.\r\n * @member {Boolean} Decrease Indicates of this location is on the Decrease LRS.  This value will be ignored if Route is a ramp.\r\n * @member {number} Arm The starting measure value.\r\n * @member {number} Srmp The SRMP for the start point of a route segment or the only point of a point.\r\n * @member {Boolean} Back Indicates if the SRMP value is back mileage.\r\n * @member {Date} ReferenceDate The date that the data was collected.\r\n * @member {Date} ResponseDate The ArmCalc output date.\r\n * @member {Date} RealignmentDate This is for storing ArmCalc result data of the start point.\r\n * @member {number} EndArm The end measure value.  Not used when defining a point.\r\n * @member {number} EndSrmp The SRMP for the end point of a route segment.  Not used when defining a point.\r\n * @member {Boolean} EndBack Indicates if the EndSrmp value is back mileage.  Not used when defining a point.\r\n * @member {Date} EndReferenceDate The date that the data was collected.  Not used when defining a point.\r\n * @member {Date} EndResponseDate The ArmCalc output date.  Not used when defining a point.\r\n * @member {Date} EndRealignDate This is for storing ArmCalc result data of the end point.  Not used when defining a point.\r\n * @member {number} ArmCalcReturnCode ArmCalc return code.  See Appendix A of <a href=\"http://wwwi.wsdot.wa.gov/gis/roadwaydata/training/roadwaydata/pdf/PC_ArmCalc_Manual_3-19-2009.pdf\">the PC ArmCalc Training Program Manual</a>.\r\n * @member {number} ArmCalcEndReturnCode ArmCalc return code for end point of a route segment.  See Appendix A of <a href=\"http://wwwi.wsdot.wa.gov/gis/roadwaydata/training/roadwaydata/pdf/PC_ArmCalc_Manual_3-19-2009.pdf\">the PC ArmCalc Training Program Manual</a>.\r\n * @member {string} ArmCalcReturnMessage The error message (if any) returned by ArmCalc when converting the begin point.  If no error occurs, this will be set to an empty string by the SOE.\r\n * @member {string} ArmCalcEndReturnMessage The error message (if any) returned by ArmCalc when converting the end point.  If no error occurs, this will be set to an empty string by the SOE.\r\n * @member {string} LocatingError If a location cannot be found on the LRS, this value will contain a message.\r\n * @member {Object} RouteGeometry An object representing either a point or a polygon.\r\n * @member {Object} EventPoint When locating the nearest point along a route, this value will be set to the input point.\r\n * @member {number} Distance The offset distance from the EventPoint to the RouteGeometry point.\r\n * @member {number} Angle The offset angle from the EventPoint to the RouteGeometry point.\r\n * @see Appendix A of <a href=\"http://wwwi.wsdot.wa.gov/planning/data/training/pdf/PC_ArmCalc_Manual_3-19-2009.pdf\">PC ArmCalc Training Program Manual</a> for the meanings of ArmCalc return codes.\r\n */\r\nvar RouteLocation = /** @class */ (function () {\r\n    /**\r\n     * A class representing either a point or a segment on a WSDOT State Route.\r\n     * @class A class representing either a point or a segment on a WSDOT State Route.\r\n     * @param {object} [json] An object containing values used to initialize the RouteLocation's properties.  Properties of this object correspond to those of the {@link RouteLocation} class.\r\n     * @param {number} [json.Id] {@link RouteLocation#Id}\r\n     * @param {string} [json.Route] {@link RouteLocation#Route}\r\n     * @param {Decrease} [json.Decrease] {@link RouteLocation#Decrease}\r\n     * @param {number} [json.Arm] {@link RouteLocation#Arm}\r\n     * @param {number} [json.Srmp] {@link RouteLocation#Srmp}\r\n     * @param {Boolean} [json.Back] {@link RouteLocation#Back}\r\n     * @param {Date} [json.ReferenceDate] {@link RouteLocation#ReferenceDate}\r\n     * @param {Date} [json.ResponseDate] {@link RouteLocation#ResponseDate}\r\n     * @param {number} [json.EndArm] {@link RouteLocation#EndArm} Only used for line segments, not points.\r\n     * @param {number} [json.EndSrmp] {@link RouteLocation#EndSrmp} Only used for line segments, not points.\r\n     * @param {Boolean} [json.EndBack] {@link RouteLocation#EndBack} Only used for line segments, not points.\r\n     * @param {Date} [json.EndReferenceDate] {@link RouteLocation#EndReferenceDate} Only used for line segments, not points.\r\n     * @param {Date} [json.EndResponseDate] {@link RouteLocation#EndResponseDate} Only used for line segments, not points.\r\n     * @param {Date} [json.RealignmentDate] {@link RouteLocation#RealignmentDate} Only used for line segments, not points. You will normally never need to set this in the constructor.\r\n     * @param {Date} [json.EndRealignDate] {@link RouteLocation#EndRealignDate}  Only used for line segments, not points. You will normally never need to set this in the constructor.\r\n     * @param {number} [json.ArmCalcReturnCode] {@link RouteLocation#ArmCalcReturnCode}  You will normally never need to set this in the constructor.\r\n     * @param {number} [json.ArmCalcEndReturnCode] {@link RouteLocation#ArmCalcEndReturnCode}  Only used for line segments, not points. You will normally never need to set this in the constructor.\r\n     * @param {string} [json.ArmCalcReturnMessage] {@link RouteLocation#ArmCalcReturnMessage}  You will normally never need to set this in the constructor.\r\n     * @param {string} [json.ArmCalcEndReturnMessage] {@link RouteLocation#ArmCalcEndReturnMessage}  Only used for line segments, not points. You will normally never need to set this in the constructor.\r\n     * @param {string} [json.LocatingError] {@link RouteLocation#LocatingError}  You will normally never need to set this in the constructor.\r\n     * @param {Object} [json.RouteGeometry] {@link RouteLocation#RouteGeometry}  You will normally never need to set this in the constructor.\r\n     * @param {Object} [json.EventPoint] {@link RouteLocation#EventPoint}  You will normally never need to set this in the constructor.\r\n     * @param {number} [json.Distance] {@link RouteLocation#Distance}   You will normally never need to set this in the constructor.\r\n     * @param {number} [json.Angle] {@link RouteLocation#Angle}  You will normally never need to set this in the constructor.\r\n     */\r\n    function RouteLocation(json) {\r\n        if (!(json && typeof json === \"object\")) {\r\n            throw new TypeError(\"No data provided\");\r\n        }\r\n        this.Id = typeof json.Id !== \"undefined\" ? json.Id : null;\r\n        this.Route = typeof json.Route !== \"undefined\" ? json.Route : null;\r\n        this.Decrease = typeof json.Decrease !== \"undefined\" ? json.Decrease : null;\r\n        this.Arm = typeof json.Arm !== \"undefined\" ? json.Arm : null;\r\n        this.Srmp = typeof json.Srmp !== \"undefined\" ? json.Srmp : null;\r\n        this.Back = typeof json.Back !== \"undefined\" ? json.Back : null;\r\n        this.ReferenceDate =\r\n            typeof json.ReferenceDate !== \"undefined\"\r\n                ? json.ReferenceDate\r\n                : null;\r\n        this.ResponseDate =\r\n            typeof json.ResponseDate !== \"undefined\"\r\n                ? json.ResponseDate\r\n                : null;\r\n        this.RealignmentDate =\r\n            typeof json.RealignmentDate !== \"undefined\"\r\n                ? json.RealignmentDate\r\n                : null;\r\n        this.EndArm = typeof json.EndArm !== \"undefined\" ? json.EndArm : null;\r\n        this.EndSrmp = typeof json.EndSrmp !== \"undefined\" ? json.EndSrmp : null;\r\n        this.EndBack = typeof json.EndBack !== \"undefined\" ? json.EndBack : null;\r\n        this.EndReferenceDate =\r\n            typeof json.EndReferenceDate !== \"undefined\"\r\n                ? json.EndReferenceDate\r\n                : null;\r\n        this.EndResponseDate =\r\n            typeof json.EndResponseDate !== \"undefined\"\r\n                ? json.EndResponseDate\r\n                : null;\r\n        this.EndRealignmentDate =\r\n            typeof json.EndRealignmentDate !== \"undefined\"\r\n                ? json.EndRealignmentDate\r\n                : null;\r\n        this.ArmCalcReturnCode =\r\n            typeof json.ArmCalcReturnCode !== \"undefined\"\r\n                ? json.ArmCalcReturnCode\r\n                : null;\r\n        this.ArmCalcEndReturnCode =\r\n            typeof json.ArmCalcEndReturnCode !== \"undefined\"\r\n                ? json.ArmCalcEndReturnCode\r\n                : null;\r\n        this.ArmCalcReturnMessage =\r\n            typeof json.ArmCalcReturnMessage !== \"undefined\"\r\n                ? json.ArmCalcReturnMessage\r\n                : null;\r\n        this.ArmCalcEndReturnMessage =\r\n            typeof json.ArmCalcEndReturnMessage !== \"undefined\"\r\n                ? json.ArmCalcEndReturnMessage\r\n                : null;\r\n        this.LocatingError =\r\n            typeof json.LocatingError !== \"undefined\" ? json.LocatingError : null;\r\n        this.RouteGeometry =\r\n            typeof json.RouteGeometry !== \"undefined\" ? json.RouteGeometry : null;\r\n        this.EventPoint =\r\n            typeof json.EventPoint !== \"undefined\" ? json.EventPoint : null;\r\n        this.Distance = typeof json.Distance !== \"undefined\" ? json.Distance : null;\r\n        this.Angle = typeof json.Angle !== \"undefined\" ? json.Angle : null;\r\n        // Set the date properties to Date objects, if appropriate.\r\n        for (var propName in this) {\r\n            if (this.hasOwnProperty(propName)) {\r\n                if (/Date$/gi.test(propName) &&\r\n                    (typeof this[propName] === \"string\" ||\r\n                        typeof this[propName] === \"number\")) {\r\n                    this[propName] = new Date(this[propName]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Returns true if the RouteLocation represents a line, false otherwise.\r\n     * @author Jeff Jacobson\r\n     * @returns {Boolean} Returns true for a linear route location, false for a point.\r\n     */\r\n    RouteLocation.prototype.isLine = function () {\r\n        return this.EndArm !== null || this.EndSrmp !== null;\r\n    };\r\n    /**\r\n     * Converts the RouteLocation into an object that can be passed to the ELC REST SOE.\r\n     * This is used internally by {@link RouteLocator#findRouteLocations} and {@link RouteLocator#findNearestRouteLocations}\r\n     * This method is also used when the <a href=\"http://www.javascriptkit.com/jsref/json.shtml\">JSON.stringify</a> method is called.\r\n     * Note: Properties of the {@link RouteLocation} that have values of null will be omitted from the output of this method.\r\n     * @author Jeff Jacobson\r\n     * @this {@link RouteLocation}\r\n     * @returns {object}\r\n     */\r\n    RouteLocation.prototype.toJSON = function () {\r\n        var output = {};\r\n        var numFieldRe = /^(?:(?:Id)|(?:(?:End)?Arm)|(ReturnCode)|(Distance)|(Angle))$/gi;\r\n        var srmpFieldRe = /Srmp$/gi;\r\n        var boolFieldRe = /(?:Decrease)|(Back)$/gi;\r\n        var dateFieldRe = /Date$/i;\r\n        // Loop through all of the properties in the RouteLocation and copy to the output object.\r\n        for (var prop in this) {\r\n            if (this.hasOwnProperty(prop)) {\r\n                var value = this[prop];\r\n                if (value && value instanceof Date && dateFieldRe.test(prop)) {\r\n                    output[prop] = [\r\n                        String(routeUtils_1.getActualMonth(value)),\r\n                        String(value.getDate()),\r\n                        String(value.getFullYear())\r\n                    ].join(\"/\");\r\n                }\r\n                else if (numFieldRe.test(prop)) {\r\n                    // Id, Arm, EndArm, or ...ReturnCode\r\n                    if (value !== null) {\r\n                        output[prop] = routeUtils_1.toNumber(value, prop);\r\n                    }\r\n                }\r\n                else if (srmpFieldRe.test(prop)) {\r\n                    // If the value is already a number or null, just pass it in.\r\n                    if (typeof value === \"number\" /*|| value === null*/) {\r\n                        output[prop] = value;\r\n                    }\r\n                    else if (typeof value === \"string\") {\r\n                        var match = srmpRe.exec(value);\r\n                        // If a matching string, match[1] will be the number portion and match[2] will be the back indicator (or undefined if there was no back indicator)\r\n                        if (match) {\r\n                            // Set the output equivalent of this property to the number portion converted to a number.\r\n                            output[prop] = Number(match[1]);\r\n                            // If there is a back indicator, set the corresponding back property to true.\r\n                            if (match[2]) {\r\n                                if (/End$/.test(prop)) {\r\n                                    output.EndBack = true;\r\n                                }\r\n                                else if (prop === \"Srmp\") {\r\n                                    output.Back = true;\r\n                                }\r\n                            }\r\n                        }\r\n                        else {\r\n                            throw new Error([\"Invalid\", prop, \"value:\", String(value)].join(\" \"));\r\n                        }\r\n                    }\r\n                }\r\n                else if (prop === \"Route\") {\r\n                    if (typeof value === \"string\") {\r\n                        var match = RouteId_1.routeRe.exec(this[prop]);\r\n                        if (match) {\r\n                            output.Route = match[0];\r\n                        }\r\n                        else {\r\n                            throw new Error(\"Route is invalidly formatted.\");\r\n                        }\r\n                    }\r\n                    else if (value !== null) {\r\n                        throw new Error(\"Route must be a string.\");\r\n                    }\r\n                }\r\n                else if (boolFieldRe.test(prop)) {\r\n                    // Decrease, Back or EndBack\r\n                    // If provided set Decrease to its boolean equivalent.  Leave as null if its null.\r\n                    output[prop] = value === null ? null : Boolean(value);\r\n                }\r\n                else if (value !== null) {\r\n                    output[prop] = value;\r\n                }\r\n            }\r\n            /*\r\n                  else {\r\n                      // Other properties (e.g., from descendant classes) will just be ignored by the ELC, so we can include them in the JSON output.\r\n                      // JSLint will complain about this else clause but this is the desired effect.\r\n                      output[prop] = value;\r\n                  }\r\n                  */\r\n        }\r\n        return output;\r\n    };\r\n    return RouteLocation;\r\n}());\r\nexports.default = RouteLocation;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\nvar Route_1 = require(\"./Route\");\r\nvar RouteLocation_1 = require(\"./RouteLocation\");\r\nvar routeUtils_1 = require(\"./routeUtils\");\r\n/**\r\n * Converts an object into a query string.\r\n * @param {Object} o - An object\r\n * @returns {string} Returns a query string representation of the input object.\r\n */\r\nfunction toQueryString(o) {\r\n    var output = [];\r\n    for (var name_1 in o) {\r\n        if (o.hasOwnProperty(name_1)) {\r\n            var value = o[name_1];\r\n            if (value == null) {\r\n                value = \"\";\r\n            }\r\n            output.push([name_1, encodeURIComponent(value)].join(\"=\"));\r\n        }\r\n    }\r\n    return output.join(\"&\");\r\n}\r\n/** Tests if a URL is under a certain length. This is used to determine whether POST should be used instead of GET.\r\n * @param {string} url - A URL\r\n * @param {number} [maxLength=2000] - The threshold URL length used to determine if GET or POST is used.\r\n * @returns {Boolean} Returns true if url exceeds maxLength, false otherwise.\r\n */\r\nfunction isUrlTooLong(url, maxLength) {\r\n    if (maxLength === void 0) { maxLength = 2000; }\r\n    if (!maxLength) {\r\n        maxLength = 2000;\r\n    }\r\n    if (typeof url === \"string\") {\r\n        return url.length > 2000;\r\n    }\r\n    return false;\r\n}\r\n// Used for JSON deserialization to RouteLocation objects.\r\nfunction routeLocationReviver(k, v) {\r\n    if (typeof v === \"object\" && v.hasOwnProperty(\"Route\")) {\r\n        return new RouteLocation_1.default(v);\r\n    }\r\n    else {\r\n        return v;\r\n    }\r\n}\r\n/**\r\n * Converts a Date object into the type of string that the ELC REST SOE methods expect.\r\n * @author Jeff Jacobson\r\n * @param {Date} date - A date object.\r\n * @return {string} A string representation of the input date, if possible, or an empty string.\r\n * @memberOf RouteLocator\r\n */\r\nfunction dateToRouteLocatorDate(date) {\r\n    var elcDate;\r\n    if (typeof date === \"object\" && date instanceof Date) {\r\n        // Convert date to a string, as that is what the API is expecting.\r\n        elcDate = [\r\n            String(routeUtils_1.getActualMonth(date)),\r\n            String(date.getDate()),\r\n            String(date.getFullYear())\r\n        ].join(\"/\");\r\n    }\r\n    else {\r\n        elcDate = date || \"\";\r\n    }\r\n    return elcDate;\r\n}\r\nvar defaultUrl = \"https://data.wsdot.wa.gov/arcgis/rest/services/Shared/ElcRestSOE/MapServer/exts/ElcRestSoe\";\r\n/**\r\n * Client for ELC REST SOE.\r\n */\r\nvar RouteLocator = /** @class */ (function () {\r\n    /**\r\n     * A helper object for querying the ELC REST SOE endpoints.\r\n     * @constructor\r\n     * @param {String} [url=\"https://data.wsdot.wa.gov/arcgis/rest/services/Shared/ElcRestSOE/MapServer/exts/ElcRestSoe\"] The URL for the ELC REST Endpoint.\r\n     * @param {String} [findRouteLocationsOperationName=\"Find Route Locations\"] - The name of the Find Route Locations operation\r\n     * @param {String} [findNearestRouteLocationsOperationName=\"Find Nearest Route Locations\"] - The name of the Find Nearest Route Locations operation\r\n     * @param {String} [routesResourceName=\"Route Info\"] - Set to \"routes\" for pre 3.3 versions which do not support the \"Route Info\" endpoint.\r\n     */\r\n    function RouteLocator(url, findRouteLocationsOperationName, findNearestRouteLocationsOperationName, routesResourceName) {\r\n        if (url === void 0) { url = \"https://data.wsdot.wa.gov/arcgis/rest/services/Shared/ElcRestSOE/MapServer/exts/ElcRestSoe\"; }\r\n        if (findRouteLocationsOperationName === void 0) { findRouteLocationsOperationName = \"Find Route Locations\"; }\r\n        if (findNearestRouteLocationsOperationName === void 0) { findNearestRouteLocationsOperationName = \"Find Nearest Route Locations\"; }\r\n        if (routesResourceName === void 0) { routesResourceName = \"Route Info\"; }\r\n        this.url = url;\r\n        this.findRouteLocationsOperationName = findRouteLocationsOperationName;\r\n        this.findNearestRouteLocationsOperationName = findNearestRouteLocationsOperationName;\r\n        this.routesResourceName = routesResourceName;\r\n        this.layerList = null;\r\n    }\r\n    Object.defineProperty(RouteLocator.prototype, \"mapServiceUrl\", {\r\n        /**\r\n         * Returns the map service portion of the ELC REST SOE URL.\r\n         * @return {String} Returns the URL to the map service.\r\n         */\r\n        get: function () {\r\n            var match = this.url.match(/.+\\/MapServer/gi);\r\n            if (match) {\r\n                return match[0];\r\n            }\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    /**\r\n     * Returns a {@link RouteList}\r\n     * @param {boolean} [useCors=true] Set to true if you want to use CORS, false otherwise. (This function does not check client or server for CORS support.)\r\n     * @returns {Promise} - Success: This function takes a single {@link RouteList}, Error: This function takes a single error parameter.\r\n     */\r\n    RouteLocator.prototype.getRouteList = function (useCors) {\r\n        if (useCors === void 0) { useCors = true; }\r\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n            var url, queryData, response, data, _a;\r\n            return tslib_1.__generator(this, function (_b) {\r\n                switch (_b.label) {\r\n                    case 0:\r\n                        // var this = this, data, request, url;\r\n                        if (this.layerList) {\r\n                            return [2 /*return*/, this.layerList];\r\n                        }\r\n                        url = [this.url, this.routesResourceName].join(\"/\");\r\n                        queryData = {\r\n                            f: \"json\"\r\n                        };\r\n                        if (!useCors) {\r\n                            queryData.callback = \"jsonp\";\r\n                        }\r\n                        url = [url, toQueryString(queryData)].join(\"?\");\r\n                        return [4 /*yield*/, fetch(url)];\r\n                    case 1:\r\n                        response = _b.sent();\r\n                        if (!(response.status === 200)) return [3 /*break*/, 8];\r\n                        _a = Route_1.parseRoutes;\r\n                        return [4 /*yield*/, response.text()];\r\n                    case 2:\r\n                        data = _a.apply(void 0, [_b.sent()]);\r\n                        if (!data.error) return [3 /*break*/, 6];\r\n                        if (!(this.routesResourceName === \"Route Info\" &&\r\n                            data.error.code === 400)) return [3 /*break*/, 4];\r\n                        // If the newer Route Info is not supported, try the older version.\r\n                        // console.warn('The \"Route Info\" endpoint is not supported. Trying the older \"route\"...\"', url);\r\n                        this.routesResourceName = \"routes\";\r\n                        return [4 /*yield*/, this.getRouteList(useCors)];\r\n                    case 3: return [2 /*return*/, _b.sent()];\r\n                    case 4: throw Error(data.error);\r\n                    case 5: return [3 /*break*/, 7];\r\n                    case 6:\r\n                        this.layerList = data;\r\n                        return [2 /*return*/, this.layerList];\r\n                    case 7: return [3 /*break*/, 9];\r\n                    case 8: throw Error(response.statusText);\r\n                    case 9: return [2 /*return*/];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Calls the ELC REST SOE to get geometry corresponding to the input locations.\r\n     * @author Jeff Jacobson\r\n     * @param {object} params The parameters for the Find Route Locations query.\r\n     * @param {RouteLocation[]} params.locations An array of RouteLocaiton objects.\r\n     * @param {Date} [params.referenceDate] The date that the locations were collected.  This can be omitted if each of the locations in the input array have their ReferenceDate properties set to a Date value.\r\n     * @param {number|string} [params.outSR] The spatial reference for the output geometry, either a WKID or WKT.  If omitted the output geometry will be the same as that of the ELC map service.\r\n     * @param {string} [params.lrsYear] Indicates which LRS layers will be used for linear referencing.  If omitted, the current LRS will be used. (E.g., \"Current\", \"2008\", \"2005\", \"2005B\".)\r\n     * @param {boolean} [params.useCors=false] If you are sure both your client (browser) and ELC server support CORS, you can set this to true.  Otherwise leave it set to false.\r\n     * @returns {Promise} Returns a promise.\r\n     * @throws {Error} Thrown if invalid parameters are specified.\r\n     */\r\n    RouteLocator.prototype.findRouteLocations = function (params) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n            var locations, referenceDate, outSR, lrsYear, useCors, data, url, formData, method, init, headers, response, json, _a, _b;\r\n            return tslib_1.__generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        locations = params.locations;\r\n                        referenceDate = params.referenceDate || \"\";\r\n                        outSR = params.outSR || null;\r\n                        lrsYear = params.lrsYear || null;\r\n                        useCors = params.useCors != null ? params.useCors : true;\r\n                        if (typeof locations !== \"object\" || !(locations instanceof Array)) {\r\n                            throw new Error(\"The locations parameter must be an array of RouteLocations with at least one element.\");\r\n                        }\r\n                        else if (!locations.length) {\r\n                            // locations has no elements or no length property...\r\n                            throw new Error(\"locations does not have enough elements.\");\r\n                        }\r\n                        if (typeof referenceDate === \"object\" && referenceDate instanceof Date) {\r\n                            // Convert date to a string, as that is what the API is expecting.\r\n                            referenceDate = [\r\n                                String(routeUtils_1.getActualMonth(referenceDate)),\r\n                                String(referenceDate.getDate()),\r\n                                String(referenceDate.getFullYear())\r\n                            ].join(\"/\");\r\n                        } /*\r\n                             else if (typeof referenceDate !== \"string\") {\r\n                                        console.debug(typeof referenceDate !== \"string\");\r\n                                        throw new Error(\"Unexpected referenceDate type.  Expected a Date or a string.\");\r\n                            }*/\r\n                        if (typeof outSR !== \"undefined\" &&\r\n                            outSR !== null &&\r\n                            typeof outSR !== \"number\" &&\r\n                            typeof outSR !== \"string\") {\r\n                            throw new Error(\"Unexpected outSR type.  Must be a WKID (number), WKT (string), or omitted (null or undefined).\");\r\n                        }\r\n                        if (typeof lrsYear !== \"undefined\" &&\r\n                            lrsYear !== null &&\r\n                            typeof lrsYear !== \"string\") {\r\n                            throw new Error(\"Invalid lrsYear.  Must be either a string or omitted altogether.\");\r\n                        }\r\n                        data = {\r\n                            f: \"json\",\r\n                            locations: JSON.stringify(locations),\r\n                            outSR: outSR || null,\r\n                            referenceDate: referenceDate || null,\r\n                            lrsYear: lrsYear || null\r\n                        };\r\n                        url = [this.url, this.findRouteLocationsOperationName].join(\"/\");\r\n                        if (!useCors) {\r\n                            data.callback = \"jsonp\";\r\n                        }\r\n                        formData = toQueryString(data);\r\n                        method = isUrlTooLong([url, formData].join(\"?\")) ? \"POST\" : \"GET\";\r\n                        if (method === \"GET\") {\r\n                            url = [url, formData].join(\"?\");\r\n                            formData = null;\r\n                        }\r\n                        else {\r\n                            headers = new Headers();\r\n                            headers.append(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n                            init = {\r\n                                method: method,\r\n                                headers: headers,\r\n                                body: formData\r\n                            };\r\n                            if (useCors) {\r\n                                init.mode = \"cors\";\r\n                            }\r\n                        }\r\n                        return [4 /*yield*/, fetch(url, init)];\r\n                    case 1:\r\n                        response = _c.sent();\r\n                        _b = (_a = JSON).parse;\r\n                        return [4 /*yield*/, response.text()];\r\n                    case 2:\r\n                        json = _b.apply(_a, [_c.sent(), routeLocationReviver]);\r\n                        if (json.error) {\r\n                            throw Error(json);\r\n                        }\r\n                        return [2 /*return*/, json];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    /**\r\n     * Calls the ELC REST SOE to get the route locations corresponding to the input point coordinates.\r\n     * @author Jeff Jacobson\r\n     * @param {object} params - See below for details\r\n     * @param {number[]} params.coordinates An array of numbers with at least two elements.  Even indexed elements represent X coordinates; odd represent Y coordinates.\r\n     * @param {Date} [params.referenceDate] The date that the locations were collected.  This can be omitted if each of the locations in the input array have their ReferenceDate properties set to a Date value.\r\n     * @param {number} params.searchRadius The distance in feet to search around each of the coordinates for a state route.\r\n     * @param {number|string} params.inSR The spatial reference of the coordinates, either a WKID or WKT.  If omitted the output geometry will be the same as that of the ELC map service.\r\n     * @param {number|string} [params.outSR] The spatial reference for the output geometry, either a WKID or WKT.  If omitted the output geometry will be the same as that of the ELC map service.\r\n     * @param {string} [params.lrsYear] Indicates which LRS layers will be used for linear referencing.  If omitted, the current LRS will be used. (E.g., \"Current\", \"2008\", \"2005\", \"2005B\".)\r\n     * @param {string} [params.routeFilter] A partial SQL query that can be used to limit which routes are searched.  E.g., \"LIKE '005%'\" or \"'005'\".\r\n     * @param {boolean} [params.useCors=true] If you are sure both your client (browser) and ELC server support CORS, you can set this to true.  Otherwise leave it set to false.\r\n     * @throws {Error} Throws an error if any of the params properties are provided with invalid values.\r\n     * @returns {Promise} A promise\r\n     */\r\n    RouteLocator.prototype.findNearestRouteLocations = function (params) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n            var elcParams, url, body, method, init, headers, response, json, _a, _b;\r\n            return tslib_1.__generator(this, function (_c) {\r\n                switch (_c.label) {\r\n                    case 0:\r\n                        elcParams = {\r\n                            f: \"json\"\r\n                        };\r\n                        if (params.useCors == null) {\r\n                            params.useCors = true;\r\n                        }\r\n                        if (typeof params.referenceDate === \"undefined\" ||\r\n                            params.referenceDate === null) {\r\n                            throw new Error(\"referenceDate not provided.\");\r\n                        }\r\n                        else {\r\n                            // Convert the date into the format that the ELC is expecting.\r\n                            elcParams.referenceDate = dateToRouteLocatorDate(params.referenceDate);\r\n                        }\r\n                        // validate coordinates.\r\n                        params.coordinates = routeUtils_1.flattenArray(params.coordinates); // Run the flattenArray function to ensure array elements are not arrays themselves.\r\n                        if (typeof params.coordinates !== \"object\" ||\r\n                            !(params.coordinates instanceof Array)) {\r\n                            throw new TypeError(\"The coordinates parameter must be an array of numbers.\");\r\n                        }\r\n                        else if (params.coordinates.length < 2 ||\r\n                            params.coordinates.length % 2 !== 0) {\r\n                            throw new TypeError(\"The coordinates array must contain at least two elements and consist of an even number of elements.\");\r\n                        }\r\n                        // Stringify the coordinates and assign to elcParams.\r\n                        elcParams.coordinates = JSON.stringify(params.coordinates);\r\n                        // validate search radius\r\n                        if (typeof params.searchRadius !== \"number\" || params.searchRadius <= 0) {\r\n                            throw new Error(\"searchRadius must be a number that is greater than zero.\");\r\n                        }\r\n                        else {\r\n                            elcParams.searchRadius = params.searchRadius;\r\n                        }\r\n                        // validate inSR.\r\n                        if (typeof params.inSR !== \"number\" && typeof params.outSR !== \"string\") {\r\n                            throw new Error(\"Unexpected inSR type.  The inSR value must be either a WKID (number) or a WKT (string).\");\r\n                        }\r\n                        else {\r\n                            elcParams.inSR = params.inSR;\r\n                        }\r\n                        // validate outSR.\r\n                        if (typeof params.outSR !== \"undefined\" &&\r\n                            params.outSR !== null &&\r\n                            typeof params.outSR !== \"number\" &&\r\n                            typeof params.outSR !== \"string\") {\r\n                            throw new Error(\"Unexpected outSR type.  Must be a WKID (number), WKT (string), or omitted (null or undefined).\");\r\n                        }\r\n                        else {\r\n                            elcParams.outSR = params.outSR;\r\n                        }\r\n                        // validate LRS year.\r\n                        // Make sure lrsYear is either a string or omitted (null or undefined).  (The previous \"if\" statement has already converted from number to string, if necessary.)\r\n                        if (typeof params.lrsYear !== \"undefined\" &&\r\n                            params.lrsYear !== null &&\r\n                            typeof params.lrsYear !== \"string\") {\r\n                            throw new Error(\"Invalid lrsYear.  Must be either a string or omitted altogether.\");\r\n                        }\r\n                        else {\r\n                            elcParams.lrsYear = params.lrsYear || undefined;\r\n                        }\r\n                        // validate routeFilter\r\n                        elcParams.routeFilter = params.routeFilter || undefined;\r\n                        if (typeof params.routeFilter !== \"undefined\" &&\r\n                            typeof params.routeFilter !== \"string\") {\r\n                            throw new Error(\"Invalid route filter type.  The routeFilter parameter should be either a string or omitted altogether.\");\r\n                        }\r\n                        url = [this.url, this.findNearestRouteLocationsOperationName].join(\"/\");\r\n                        if (!params.useCors) {\r\n                            elcParams.callback = \"jsonp\";\r\n                        }\r\n                        body = toQueryString(elcParams);\r\n                        method = isUrlTooLong(url + \"?\" + body) ? \"POST\" : \"GET\";\r\n                        if (method === \"GET\") {\r\n                            url = [url, body].join(\"?\");\r\n                        }\r\n                        else {\r\n                            headers = new Headers();\r\n                            headers.append(\"Content-Type\", \"application/x-www-form-urlencoded\");\r\n                            init = {\r\n                                body: body,\r\n                                method: method,\r\n                                headers: headers\r\n                            };\r\n                            if (params.useCors) {\r\n                                init.mode = \"cors\";\r\n                            }\r\n                        }\r\n                        return [4 /*yield*/, fetch(url, init)];\r\n                    case 1:\r\n                        response = _c.sent();\r\n                        _b = (_a = JSON).parse;\r\n                        return [4 /*yield*/, response.text()];\r\n                    case 2:\r\n                        json = _b.apply(_a, [_c.sent(), routeLocationReviver]);\r\n                        if (json.error) {\r\n                            throw Error(json);\r\n                        }\r\n                        return [2 /*return*/, json];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return RouteLocator;\r\n}());\r\nexports.default = RouteLocator;\r\n","\"use strict\";\r\n/**\r\n * Main entry point for wsdot-elc module.\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar tslib_1 = require(\"tslib\");\r\ntslib_1.__exportStar(require(\"./lrsTypeUtils\"), exports);\r\ntslib_1.__exportStar(require(\"./Route\"), exports);\r\ntslib_1.__exportStar(require(\"./RouteId\"), exports);\r\ntslib_1.__exportStar(require(\"./RouteLocation\"), exports);\r\ntslib_1.__exportStar(require(\"./RouteLocator\"), exports);\r\ntslib_1.__exportStar(require(\"./routeTypeUtils\"), exports);\r\ntslib_1.__exportStar(require(\"./routeUtils\"), exports);\r\nvar FormatError_1 = require(\"./FormatError\");\r\nexports.FormatError = FormatError_1.default;\r\nvar Route_1 = require(\"./Route\");\r\nexports.Route = Route_1.default;\r\nvar RouteId_1 = require(\"./RouteId\");\r\nexports.RouteId = RouteId_1.default;\r\nvar RouteLocation_1 = require(\"./RouteLocation\");\r\nexports.RouteLocation = RouteLocation_1.default;\r\nvar RouteLocator_1 = require(\"./RouteLocator\");\r\nexports.RouteLocator = RouteLocator_1.default;\r\nexports.default = RouteLocator_1.default;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar LrsType;\r\n(function (LrsType) {\r\n    LrsType[LrsType[\"INCREASE\"] = 1] = \"INCREASE\";\r\n    LrsType[LrsType[\"DECREASE\"] = 2] = \"DECREASE\";\r\n    LrsType[LrsType[\"BOTH\"] = 3] = \"BOTH\";\r\n    LrsType[LrsType[\"RAMP\"] = 4] = \"RAMP\";\r\n    LrsType[LrsType[\"FT\"] = 8] = \"FT\";\r\n    LrsType[LrsType[\"TURNBACK\"] = 16] = \"TURNBACK\";\r\n})(LrsType = exports.LrsType || (exports.LrsType = {}));\r\n/**\r\n * Returns the numerical value.\r\n * @param value - either a number or a string\r\n * @returns Returns the number corresponding to the input value. If the input is a valid number, the same value is returned.\r\n * @throws {Error} Throws an error if the input value is an unexpected value.\r\n */\r\nfunction getLrsTypeValue(value) {\r\n    var output = null;\r\n    if (typeof value === \"string\") {\r\n        if (/^i/i.test(value)) {\r\n            output = LrsType.INCREASE;\r\n        }\r\n        else if (/^d/i.test(value)) {\r\n            output = LrsType.DECREASE;\r\n        }\r\n        else if (/^b/i.test(value)) {\r\n            output = LrsType.BOTH;\r\n        }\r\n        else if (/^r/i.test(value)) {\r\n            output = LrsType.RAMP;\r\n        }\r\n        else if (/^f/i.test(value)) {\r\n            output = LrsType.FT;\r\n        }\r\n        else if (/t/i.test(value)) {\r\n            output = LrsType.TURNBACK;\r\n        }\r\n        else {\r\n            throw new Error(\"Invalid value: \" + value);\r\n        }\r\n    }\r\n    else if ((typeof value === \"number\" && (value >= 1 && value <= 4)) ||\r\n        (value === 8 || value === 16)) {\r\n        output = value;\r\n    }\r\n    else {\r\n        throw new Error(\"Invalid value: \" + value);\r\n    }\r\n    return output;\r\n}\r\nexports.getLrsTypeValue = getLrsTypeValue;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar RouteTypes;\r\n(function (RouteTypes) {\r\n    RouteTypes[RouteTypes[\"SR\"] = 0] = \"SR\";\r\n    RouteTypes[RouteTypes[\"IS\"] = 1] = \"IS\";\r\n    RouteTypes[RouteTypes[\"US\"] = 2] = \"US\";\r\n    RouteTypes[RouteTypes[\"RA\"] = 3] = \"RA\";\r\n    RouteTypes[RouteTypes[\"LC\"] = 4] = \"LC\";\r\n    RouteTypes[RouteTypes[\"FT\"] = 5] = \"FT\";\r\n    RouteTypes[RouteTypes[\"PR\"] = 6] = \"PR\";\r\n    RouteTypes[RouteTypes[\"CN\"] = 7] = \"CN\";\r\n    RouteTypes[RouteTypes[\"TB\"] = 8] = \"TB\";\r\n})(RouteTypes = exports.RouteTypes || (exports.RouteTypes = {}));\r\nvar routeTypeAbbrevKeys = [\r\n    \"SR\",\r\n    \"IS\",\r\n    \"US\",\r\n    \"RA\",\r\n    \"LC\",\r\n    \"FT\",\r\n    \"PR\",\r\n    \"CN\",\r\n    \"TB\"\r\n];\r\nvar routeClassRe = /^(?:(SR)|(IS)|(US)|(RA)|(LC)|(FT)|(PR)|(CN)|(TB))$/i;\r\nfunction getRouteTypeValue(value) {\r\n    var output = null;\r\n    if (typeof value === \"string\") {\r\n        var match = value.match(routeClassRe);\r\n        if (match) {\r\n            if (match[1]) {\r\n                output = RouteTypes.SR;\r\n            }\r\n            else if (match[2]) {\r\n                output = RouteTypes.IS;\r\n            }\r\n            else if (match[3]) {\r\n                output = RouteTypes.US;\r\n            }\r\n            else if (match[4]) {\r\n                output = RouteTypes.RA;\r\n            }\r\n            else if (match[5]) {\r\n                output = RouteTypes.LC;\r\n            }\r\n            else if (match[6]) {\r\n                output = RouteTypes.FT;\r\n            }\r\n            else if (match[7]) {\r\n                output = RouteTypes.PR;\r\n            }\r\n            else if (match[8]) {\r\n                output = RouteTypes.CN;\r\n            }\r\n            else if (match[9]) {\r\n                output = RouteTypes.TB;\r\n            }\r\n        }\r\n    }\r\n    else if (typeof value === \"number\" &&\r\n        Math.trunc(value) === value &&\r\n        (value >= 0 && value <= 8)) {\r\n        output = value;\r\n    }\r\n    return output;\r\n}\r\nexports.getRouteTypeValue = getRouteTypeValue;\r\nfunction getRouteTypeAbbreviation(value) {\r\n    var output;\r\n    if (typeof value === \"number\" &&\r\n        value >= 0 &&\r\n        value < routeTypeAbbrevKeys.length) {\r\n        output = RouteTypes[value];\r\n    }\r\n    else if (typeof value === \"string\" && routeClassRe.test(value)) {\r\n        output = value.toUpperCase();\r\n    }\r\n    else {\r\n        throw new Error(\"Invalid value\");\r\n    }\r\n    return output;\r\n}\r\nexports.getRouteTypeAbbreviation = getRouteTypeAbbreviation;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * Converts a value into a number.  Similar to passing a value into the Number() function, except that this function will throw an error if\r\n * the value cannot be converted to a number, whereas Number() will return NaN.  If null or undefined are passed in, they will also be returned.\r\n * @param {(number|string)} value - A value that can be converted into a number.  If a number is passed in, the same number will be returned (unless that number is NaN).\r\n * @param {string=\"this\"} [propName] - A property name that is only used when value cannot be converted to a number.\r\n * @returns {(number|null|undefined)} If null or undefined are passed in, the same value will be returned.  Otherwise the number equivalent of \"value\" is returned.\r\n * @throws {Error} Thrown if \"value\" cannot be converted into a number (and is not null or undefined).\r\n */\r\nfunction toNumber(value, propName) {\r\n    var output;\r\n    // If a property name is not provided, set the name to \"this\" for the error message (if necessary).\r\n    if (propName === null || typeof propName === \"undefined\") {\r\n        propName = \"this\";\r\n    }\r\n    // Make sure that if ID is provided it is a number or convertible to a number.\r\n    if (typeof value !== \"undefined\" && value !== null) {\r\n        // Convert value to a number.  Something like \"abc\" can't be converted and will result in NaN, in which case an error is thrown.\r\n        value = Number(value);\r\n        if (isNaN(value)) {\r\n            throw new Error(\"If \" + propName + \" property is provided, it must be a number.\");\r\n        }\r\n        output = value;\r\n    }\r\n    else if (value === null) {\r\n        return null;\r\n    }\r\n    return output;\r\n}\r\nexports.toNumber = toNumber;\r\n/**\r\n * Returns the month component of a Date object as an integer.\r\n * For some reason JavaScript's Date.getMonth() method returns a zero-based month integer (i.e., Jan = 0, Feb = 1, etc.) instead of the way\r\n * almost every culture on Earth would expect (i.e., Jan = 1, Feb = 2, etc.).  This method returns it the correct way.\r\n * @author Jeff Jacobson\r\n * @param {Date} date - A Date object\r\n * @return {number} Returns the number that humans use to represent the Date's month (Date.getMonth() + 1).\r\n */\r\nfunction getActualMonth(date) {\r\n    return date.getMonth() + 1;\r\n}\r\nexports.getActualMonth = getActualMonth;\r\n/**\r\n * If an array is a jagged-array, this function will \"flatten\" the array into a regular array.\r\n * @author Jeff Jacobson\r\n * @param {Array} array An array.\r\n * @return {Array} A flattened version of the input array.\r\n * @exception {Error} Thrown if array is not an object of type Array.\r\n * @memberOf $.wsdot.elc\r\n */\r\nfunction flattenArray(array) {\r\n    if (typeof array === \"undefined\" || array === null) {\r\n        return array;\r\n    }\r\n    if (typeof array !== \"object\" || !(array instanceof Array)) {\r\n        throw new Error(\"array must be an Array object.\");\r\n    }\r\n    var outArray = [];\r\n    for (var i = 0, l = array.length; i < l; i += 1) {\r\n        var element = array[i];\r\n        if (typeof element === \"object\" && element instanceof Array) {\r\n            var array2 = flattenArray(element);\r\n            for (var j = 0, jl = array2.length; j < jl; j += 1) {\r\n                outArray.push(array2[j]);\r\n            }\r\n        }\r\n        else {\r\n            outArray.push(element);\r\n        }\r\n    }\r\n    return outArray;\r\n}\r\nexports.flattenArray = flattenArray;\r\n","module.exports = __WEBPACK_EXTERNAL_MODULE__254__;","module.exports = __WEBPACK_EXTERNAL_MODULE__481__;","module.exports = __WEBPACK_EXTERNAL_MODULE__591__;","module.exports = __WEBPACK_EXTERNAL_MODULE__701__;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// module exports must be returned from runtime so entry inlining is disabled\n// startup\n// Load entry module and return exports\nreturn __webpack_require__(944);\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => module['default'] :\n\t\t() => module;\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};"],"sourceRoot":""}