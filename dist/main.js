/*! For license information please see main.js.LICENSE.txt */
require(["esri/geometry/Extent","esri/Map","esri/views/MapView","esri/widgets/Search"],((e,t,r,n)=>(()=>{"use strict";var o={944:(e,t,r)=>{r.r(t);var n=r(481),o=r.n(n),i=r(254),a=r.n(i),u=r(591),s=r.n(u),l=r(701),c=r.n(l),f=r(910);function p(e,t){const r=Number(e.routeId.sr),n=Number(t.routeId.sr);return r===n?0:r>n?1:-1}function d(e,t){const[r,n]=[e,t].map((e=>e.routeId.mainlineIntersectionMP));return r===n?0:r>n?1:-1}const h=new(a())({basemap:"topo-vector"}),y=new(o())({xmin:-124.79,ymin:45.54,xmax:-116.91,ymax:49.05}),m=new(s())({container:"viewDiv",map:h,extent:y}),v=new(c())({view:m,includeDefaultSources:!1,sources:[{locator:{url:"http://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer"},filter:{geometry:y},countryCode:"US"}]});m.ui.add(v,"top-right"),(new f.RouteLocator).getRouteList(!0).then((e=>{if(console.group("Get Route List"),console.debug("routes",e),null===e)throw new Error("null routes");const t=e.Current;console.debug("current routes",t);const r=function(e){const t=document.createElement("form");t.classList.add("esri-widget");const r=document.createElement("label");r.innerText="Select a route";const n=document.createElement("select");n.id=r.htmlFor="routeSelect",t.appendChild(r),t.appendChild(n);const o=e.filter((e=>e.isMainline)).sort(p);for(const e of o){const t=document.createElement("option");t.label=e.label,t.value=e.routeId.toString(),n.options.add(t)}for(const e of["begin","end"]){const r=document.createElement("label"),n=document.createElement("input");n.type="number",n.min="0",n.step="0.001",r.innerText="Begin SRMP",r.innerText=`${e} SRMP`,n.id=r.htmlFor=`${e}SrmpInput`,n.required=!0,t.appendChild(r),t.appendChild(n)}const i=document.createElement("button");return i.type="submit",i.innerText="Submit",t.appendChild(i),t.addEventListener("submit",(e=>{var r,i;e.preventDefault();const a=o.filter((e=>e.routeId.toString()===n.selectedOptions[0].value))[0],u=new CustomEvent("route-selected",{detail:{route:a,beginSrmp:Number(null===(r=t.querySelector("#beginSrmpInput"))||void 0===r?void 0:r.value),endSrmp:Number(null===(i=t.querySelector("#endSrmpInput"))||void 0===i?void 0:i.value)}});t.dispatchEvent(u)})),t}(t);m.ui.add(r,"top-right"),console.groupEnd(),r.addEventListener("route-selected",(e=>{const r=e,n=r.detail,{route:o,beginSrmp:i,endSrmp:a}=n;console.debug(`Selected route is ${o.name} @ ${i} - ${a}`,r);const u=function(e,t){const{route:r,beginSrmp:n,endSrmp:o}=e,i=r.routeId.sr;return t.filter((e=>e.routeId.sr===i&&"number"==typeof e.routeId.mainlineIntersectionMP&&n<=e.routeId.mainlineIntersectionMP&&e.routeId.mainlineIntersectionMP<=o)).sort(d)}(n,t);console.debug("connected routes",u);const s=u.map((e=>`${e.routeId.description} (${e.name})`)).join("\n");alert(`Connected routes are\n${s}`)}))}),(e=>{console.error(e)}))},655:(e,t,r)=>{r.r(t),r.d(t,{__extends:()=>o,__assign:()=>i,__rest:()=>a,__decorate:()=>u,__param:()=>s,__metadata:()=>l,__awaiter:()=>c,__generator:()=>f,__createBinding:()=>p,__exportStar:()=>d,__values:()=>h,__read:()=>y,__spread:()=>m,__spreadArrays:()=>v,__await:()=>b,__asyncGenerator:()=>R,__asyncDelegator:()=>g,__asyncValues:()=>S,__makeTemplateObject:()=>E,__importStar:()=>w,__importDefault:()=>T,__classPrivateFieldGet:()=>O,__classPrivateFieldSet:()=>_});var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function o(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var i=function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function a(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}function u(e,t,r,n){var o,i=arguments.length,a=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,n);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a}function s(e,t){return function(r,n){t(r,n,e)}}function l(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function c(e,t,r,n){return new(r||(r=Promise))((function(o,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function u(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,u)}s((n=n.apply(e,t||[])).next())}))}function f(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!((o=(o=a.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}function p(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}function d(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||(t[r]=e[r])}function h(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function y(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(y(arguments[t]));return e}function v(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],a=0,u=i.length;a<u;a++,o++)n[o]=i[a];return n}function b(e){return this instanceof b?(this.v=e,this):new b(e)}function R(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),i=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(e){o[e]&&(n[e]=function(t){return new Promise((function(r,n){i.push([e,t,r,n])>1||u(e,t)}))})}function u(e,t){try{(r=o[e](t)).value instanceof b?Promise.resolve(r.value.v).then(s,l):c(i[0][2],r)}catch(e){c(i[0][3],e)}var r}function s(e){u("next",e)}function l(e){u("throw",e)}function c(e,t){e(t),i.shift(),i.length&&u(i[0][0],i[0][1])}}function g(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,o){t[n]=e[n]?function(t){return(r=!r)?{value:b(e[n](t)),done:"return"===n}:o?o(t):t}:o}}function S(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=h(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){!function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)}(n,o,(t=e[r](t)).done,t.value)}))}}}function E(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function w(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function T(e){return e&&e.__esModule?e:{default:e}}function O(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function _(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}},997:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(655),o=function(e){function t(t,r){var n=this,o='Not in expected format: "'+t+'".';return r&&(o+=" Expected format: "+r),(n=e.call(this,o)||this).value=t,n.expectedFormat=r||null,n}return n.__extends(t,e),t}(Error);t.default=o},842:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(997),o=r(828),i=r(543),a=r(629);function u(e,t){var r;if(/^(?:(?:Current)|(?:\d{4,8}))$/.test(e)){for(var o in r=[],t)if(t.hasOwnProperty(o)&&o.trim()){var i=t[o],a=null;try{"number"==typeof i?a=new s(o,i):i.hasOwnProperty("routeType")&&(a=new s(o,i.direction,i.routeType))}catch(e){if(!(e instanceof n.default))throw e}a&&r.push(a)}}else r=t;return r}t.parseRoutes=function(e){return JSON.parse(e,u)};var s=function(){function e(e,t,r){this._name=e,this._lrsTypes=o.getLrsTypeValue(t),this._routeType=null!=r?a.getRouteTypeValue(r):null,this._routeId=new i.default(this._name)}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isMainline",{get:function(){return!this.routeId.rrt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){var e,t=this.routeTypeAbbreviation,r=parseInt(this.routeId.sr,10);return t&&("SR"===t?e="WA-"+r:"US"===t?e=t+"-"+r:"IS"===t&&(e="I-"+r)),e||(e=String(r)),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lrsTypes",{get:function(){return this._lrsTypes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"routeType",{get:function(){return this._routeType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"routeTypeAbbreviation",{get:function(){return null!==this.routeType?a.getRouteTypeAbbreviation(this.routeType):null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"routeId",{get:function(){return this._routeId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isIncrease",{get:function(){return this._lrsTypes===o.LrsType.INCREASE||this._lrsTypes===o.LrsType.BOTH},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDecrease",{get:function(){return this.lrsTypes===o.LrsType.DECREASE||this.lrsTypes===o.LrsType.BOTH},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBoth",{get:function(){return this.lrsTypes===o.LrsType.BOTH},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRamp",{get:function(){return this.lrsTypes===o.LrsType.RAMP},enumerable:!0,configurable:!0}),e}();t.default=s},543:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(997);t.routeRe=/^(\d{3})(?:([A-Z0-9]{2})([A-Z0-9]{0,6}))?/i;var o={AR:"Alternate Route",CD:"Collector Distributor (Dec)",CO:"Couplet",CI:"Collector Distributor (Inc)",FI:"Frontage Road (Inc)",FD:"Frontage Road (Dec)",LX:"Crossroad within Interchange",RL:"Reversible Lane",SP:"Spur",TB:"Transitional Turnback",TR:"Temporary Route",PR:"Proposed Route",FS:"Ferry Ship (Boat)",FT:"Ferry Terminal",UC:"Under Construction",HI:"Grade-Separated HOV (Inc)",HD:"Grade-Separated HOV (Dec)"},i={P:"Off Ramp (Inc)",Q:"On Ramp (Inc)",R:"Off Ramp (Dec)",S:"On Ramp (Dec)"};for(var a in i)if(i.hasOwnProperty(a)){for(var u=i[a],s=1;s<10;s+=1)o[""+a+s]=u+" "+s;o[a+"U"]="Extension of "+a+" ramp"}var l={"2NDST":"2nd St.","3RDAVE":"3rd Ave.","6THST":"6th St.",ABERDN:"Aberdeen",ANACOR:"Anacortes",ANACRT:"Anacortes",ANAFT2:"ANAFT2",AURORA:"Aurora",BOONE:"Boone St.",BREMER:"Bremerton",BROWNE:"Browne St.",BURKE:"Beverly Burke Rd.",CANBY:"Fort Canby",CEDRWY:"Cedar Way",CLEELM:"Cle Elem",CLINTN:"Clifton",COLFAX:"Colfax",COUGAR:"Cougar",COUPLT:"COUPLT",COUPVL:"Coupville",CRWNPT:"Crown Point",CS0631:"CS0631",DIVISN:"Division",EAGHBR:"Eagle Harbor",EDMOND:"Edmonds",EVERET:"Everett",FAUNTL:"Fauntleroy",FIFE:"Fife",FRIDAY:"Friday Harbor",GNESSE:"GNESSE",GORST:"Gorst",HERON:"Heron St.",HQUIAM:"Hoquiam",HYAK:"Hyak Dr.",KELRNO:"Keller North",KELRSO:"Keller South",KELSO:"Kelso",KINFT1:"KINFT1",KINGST:"Kingston",KNGSTN:"Kingston",LEAHY:"Leahy",LONNGR:"LONNGR",LOPEZ:"Lopez",MARYHL:"Maryhill",MKLTEO:"Mukilteo",MONROE:"Monroe",MORA:"Mora Rd.",MTBAKR:"Mt. Baker",MUKILT:"Mukilteo",NEWPRT:"Newport",NSC:"NSC",OLD504:"Old 504",OMAK:"Omak",ORCAS:"Orcas Island",ORGBEG:"ORGBEG",ORGMID:"ORGMID",ORGSPR:"ORGSPR",ORONDO:"Orondo",OSO:"Oso",PAINE:"Paine",PEARL:"Pearl St.",PRTANG:"Port Angeles",PTDEFI:"Pt. Defiance",PTTFT2:"PTTFT2",PTTOWN:"Port Townsend",PULLMN:"Pullman",PURDY:"Purdy Ln.",REDMND:"Redmond",SEATAC:"SeaTac",SEATTL:"Seattle",SHAW:"Shaw Island",SIDNEY:"Sidney",SLVRDL:"Silverdale",SOUTHW:"Southworth",SUMAS:"Sumas",TAHLEQ:"Tahlequa",TUNNEL:"Tunnel",UNDRWD:"Underwood",VANCVR:"Vancouver",VASHON:"Vashon",VIADCT:"Alaskan Way Viaduct",WALULA:"Wallula Junction",WENTCH:"Wenatchee",WESTPT:"Westport",WINSLO:"Winslow",XBASE:"XBASE",YELMLP:"Yelm Loop"},c=function(){function e(e){var r;if(!(e=e.trim()))throw new TypeError("No route ID was provided.");if(!(r=e.match(t.routeRe)))throw new n.default(e,t.routeRe);this._sr=r[1],this._rrt=r[2]||null,this._rrq=r[3]||null}return e.sort=function(e,t){if(e.sr>t.sr)return 1;if(e.sr<t.sr)return-1;if(null!==e.rrq&&null!==t.rrq)return e.rrq===t.rrq?0:null===e.mainlineIntersectionMP&&null!==t.mainlineIntersectionMP?-1:null!==e.mainlineIntersectionMP&&null===t.mainlineIntersectionMP||e.rrq>t.rrq?1:-1;var r=e.toString(),n=t.toString();return r===n?0:r>n?1:-1},Object.defineProperty(e.prototype,"sr",{get:function(){return this._sr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rrt",{get:function(){return this._rrt},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rrq",{get:function(){return this._rrq},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rrtDescription",{get:function(){return this._rrt?o[this._rrt]:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rrqDescription",{get:function(){var e=null;if(null!==this._rrq)if(l[this._rrq])e=l[this._rrq];else{var t=this.mainlineIntersectionMP;e=null!==t?" @ MP "+t:this._rrq}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){return this._rrt?this._rrq?null!==this.mainlineIntersectionMP?[this._sr,this.rrtDescription,"@ MP",this.mainlineIntersectionMP].join(" "):[this._sr,this.rrtDescription,this.rrqDescription].join(" "):[this._sr,this.rrtDescription].join(" "):[this._sr,"Mainline"].join(" ")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mainlineIntersectionMP",{get:function(){var e=null,t=this._rrq?this._rrq.match(/^(\d+)([BCRS])?$/i):null;return t&&(e=parseInt(t[1],10),e/=100,t[2]&&(e=[e,t[2]].join(""))),e},enumerable:!0,configurable:!0}),e.prototype.toString=function(){var e=[this.sr];return this.rrt&&(e.push(this.rrt),this.rrq&&e.push(this.rrq)),e.join("")},e}();t.default=c},743:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(543),o=r(948),i=/^([\d\.]+)(B)?$/i,a=function(){function e(e){if(!e||"object"!=typeof e)throw new TypeError("No data provided");for(var t in this.Id=void 0!==e.Id?e.Id:null,this.Route=void 0!==e.Route?e.Route:null,this.Decrease=void 0!==e.Decrease?e.Decrease:null,this.Arm=void 0!==e.Arm?e.Arm:null,this.Srmp=void 0!==e.Srmp?e.Srmp:null,this.Back=void 0!==e.Back?e.Back:null,this.ReferenceDate=void 0!==e.ReferenceDate?e.ReferenceDate:null,this.ResponseDate=void 0!==e.ResponseDate?e.ResponseDate:null,this.RealignmentDate=void 0!==e.RealignmentDate?e.RealignmentDate:null,this.EndArm=void 0!==e.EndArm?e.EndArm:null,this.EndSrmp=void 0!==e.EndSrmp?e.EndSrmp:null,this.EndBack=void 0!==e.EndBack?e.EndBack:null,this.EndReferenceDate=void 0!==e.EndReferenceDate?e.EndReferenceDate:null,this.EndResponseDate=void 0!==e.EndResponseDate?e.EndResponseDate:null,this.EndRealignmentDate=void 0!==e.EndRealignmentDate?e.EndRealignmentDate:null,this.ArmCalcReturnCode=void 0!==e.ArmCalcReturnCode?e.ArmCalcReturnCode:null,this.ArmCalcEndReturnCode=void 0!==e.ArmCalcEndReturnCode?e.ArmCalcEndReturnCode:null,this.ArmCalcReturnMessage=void 0!==e.ArmCalcReturnMessage?e.ArmCalcReturnMessage:null,this.ArmCalcEndReturnMessage=void 0!==e.ArmCalcEndReturnMessage?e.ArmCalcEndReturnMessage:null,this.LocatingError=void 0!==e.LocatingError?e.LocatingError:null,this.RouteGeometry=void 0!==e.RouteGeometry?e.RouteGeometry:null,this.EventPoint=void 0!==e.EventPoint?e.EventPoint:null,this.Distance=void 0!==e.Distance?e.Distance:null,this.Angle=void 0!==e.Angle?e.Angle:null,this)this.hasOwnProperty(t)&&(!/Date$/gi.test(t)||"string"!=typeof this[t]&&"number"!=typeof this[t]||(this[t]=new Date(this[t])))}return e.prototype.isLine=function(){return null!==this.EndArm||null!==this.EndSrmp},e.prototype.toJSON=function(){var e={},t=/^(?:(?:Id)|(?:(?:End)?Arm)|(ReturnCode)|(Distance)|(Angle))$/gi,r=/Srmp$/gi,a=/(?:Decrease)|(Back)$/gi,u=/Date$/i;for(var s in this)if(this.hasOwnProperty(s)){var l=this[s];if(l&&l instanceof Date&&u.test(s))e[s]=[String(o.getActualMonth(l)),String(l.getDate()),String(l.getFullYear())].join("/");else if(t.test(s))null!==l&&(e[s]=o.toNumber(l,s));else if(r.test(s)){if("number"==typeof l)e[s]=l;else if("string"==typeof l){if(!(c=i.exec(l)))throw new Error(["Invalid",s,"value:",String(l)].join(" "));e[s]=Number(c[1]),c[2]&&(/End$/.test(s)?e.EndBack=!0:"Srmp"===s&&(e.Back=!0))}}else if("Route"===s){if("string"==typeof l){var c;if(!(c=n.routeRe.exec(this[s])))throw new Error("Route is invalidly formatted.");e.Route=c[0]}else if(null!==l)throw new Error("Route must be a string.")}else a.test(s)?e[s]=null===l?null:Boolean(l):null!==l&&(e[s]=l)}return e},e}();t.default=a},666:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(655),o=r(842),i=r(743),a=r(948);function u(e){var t=[];for(var r in e)if(e.hasOwnProperty(r)){var n=e[r];null==n&&(n=""),t.push([r,encodeURIComponent(n)].join("="))}return t.join("&")}function s(e,t){return void 0===t&&(t=2e3),t||(t=2e3),"string"==typeof e&&e.length>2e3}function l(e,t){return"object"==typeof t&&t.hasOwnProperty("Route")?new i.default(t):t}var c=function(){function e(e,t,r,n){void 0===e&&(e="https://data.wsdot.wa.gov/arcgis/rest/services/Shared/ElcRestSOE/MapServer/exts/ElcRestSoe"),void 0===t&&(t="Find Route Locations"),void 0===r&&(r="Find Nearest Route Locations"),void 0===n&&(n="Route Info"),this.url=e,this.findRouteLocationsOperationName=t,this.findNearestRouteLocationsOperationName=r,this.routesResourceName=n,this.layerList=null}return Object.defineProperty(e.prototype,"mapServiceUrl",{get:function(){var e=this.url.match(/.+\/MapServer/gi);if(e)return e[0]},enumerable:!0,configurable:!0}),e.prototype.getRouteList=function(e){return void 0===e&&(e=!0),n.__awaiter(this,void 0,void 0,(function(){var t,r,i,a,s;return n.__generator(this,(function(n){switch(n.label){case 0:return this.layerList?[2,this.layerList]:(t=[this.url,this.routesResourceName].join("/"),r={f:"json"},e||(r.callback="jsonp"),t=[t,u(r)].join("?"),[4,fetch(t)]);case 1:return 200!==(i=n.sent()).status?[3,8]:(s=o.parseRoutes,[4,i.text()]);case 2:return(a=s.apply(void 0,[n.sent()])).error?"Route Info"!==this.routesResourceName||400!==a.error.code?[3,4]:(this.routesResourceName="routes",[4,this.getRouteList(e)]):[3,6];case 3:return[2,n.sent()];case 4:throw Error(a.error);case 5:return[3,7];case 6:return this.layerList=a,[2,this.layerList];case 7:return[3,9];case 8:throw Error(i.statusText);case 9:return[2]}}))}))},e.prototype.findRouteLocations=function(e){return n.__awaiter(this,void 0,void 0,(function(){var t,r,o,i,c,f,p,d,h,y,m,v,b,R,g;return n.__generator(this,(function(n){switch(n.label){case 0:if(t=e.locations,r=e.referenceDate||"",o=e.outSR||null,i=e.lrsYear||null,c=null==e.useCors||e.useCors,!("object"==typeof t&&t instanceof Array))throw new Error("The locations parameter must be an array of RouteLocations with at least one element.");if(!t.length)throw new Error("locations does not have enough elements.");if("object"==typeof r&&r instanceof Date&&(r=[String(a.getActualMonth(r)),String(r.getDate()),String(r.getFullYear())].join("/")),null!=o&&"number"!=typeof o&&"string"!=typeof o)throw new Error("Unexpected outSR type.  Must be a WKID (number), WKT (string), or omitted (null or undefined).");if(null!=i&&"string"!=typeof i)throw new Error("Invalid lrsYear.  Must be either a string or omitted altogether.");return f={f:"json",locations:JSON.stringify(t),outSR:o||null,referenceDate:r||null,lrsYear:i||null},p=[this.url,this.findRouteLocationsOperationName].join("/"),c||(f.callback="jsonp"),d=u(f),"GET"==(h=s([p,d].join("?"))?"POST":"GET")?(p=[p,d].join("?"),d=null):((m=new Headers).append("Content-Type","application/x-www-form-urlencoded"),y={method:h,headers:m,body:d},c&&(y.mode="cors")),[4,fetch(p,y)];case 1:return v=n.sent(),g=(R=JSON).parse,[4,v.text()];case 2:if((b=g.apply(R,[n.sent(),l])).error)throw Error(b);return[2,b]}}))}))},e.prototype.findNearestRouteLocations=function(e){return n.__awaiter(this,void 0,void 0,(function(){var t,r,o,i,c,f,p,d,h,y;return n.__generator(this,(function(n){switch(n.label){case 0:if(t={f:"json"},null==e.useCors&&(e.useCors=!0),void 0===e.referenceDate||null===e.referenceDate)throw new Error("referenceDate not provided.");if(t.referenceDate="object"==typeof(m=e.referenceDate)&&m instanceof Date?[String(a.getActualMonth(m)),String(m.getDate()),String(m.getFullYear())].join("/"):m||"",e.coordinates=a.flattenArray(e.coordinates),!("object"==typeof e.coordinates&&e.coordinates instanceof Array))throw new TypeError("The coordinates parameter must be an array of numbers.");if(e.coordinates.length<2||e.coordinates.length%2!=0)throw new TypeError("The coordinates array must contain at least two elements and consist of an even number of elements.");if(t.coordinates=JSON.stringify(e.coordinates),"number"!=typeof e.searchRadius||e.searchRadius<=0)throw new Error("searchRadius must be a number that is greater than zero.");if(t.searchRadius=e.searchRadius,"number"!=typeof e.inSR&&"string"!=typeof e.outSR)throw new Error("Unexpected inSR type.  The inSR value must be either a WKID (number) or a WKT (string).");if(t.inSR=e.inSR,void 0!==e.outSR&&null!==e.outSR&&"number"!=typeof e.outSR&&"string"!=typeof e.outSR)throw new Error("Unexpected outSR type.  Must be a WKID (number), WKT (string), or omitted (null or undefined).");if(t.outSR=e.outSR,void 0!==e.lrsYear&&null!==e.lrsYear&&"string"!=typeof e.lrsYear)throw new Error("Invalid lrsYear.  Must be either a string or omitted altogether.");if(t.lrsYear=e.lrsYear||void 0,t.routeFilter=e.routeFilter||void 0,void 0!==e.routeFilter&&"string"!=typeof e.routeFilter)throw new Error("Invalid route filter type.  The routeFilter parameter should be either a string or omitted altogether.");return r=[this.url,this.findNearestRouteLocationsOperationName].join("/"),e.useCors||(t.callback="jsonp"),o=u(t),"GET"==(i=s(r+"?"+o)?"POST":"GET")?r=[r,o].join("?"):((f=new Headers).append("Content-Type","application/x-www-form-urlencoded"),c={body:o,method:i,headers:f},e.useCors&&(c.mode="cors")),[4,fetch(r,c)];case 1:return p=n.sent(),y=(h=JSON).parse,[4,p.text()];case 2:if((d=y.apply(h,[n.sent(),l])).error)throw Error(d);return[2,d]}var m}))}))},e}();t.default=c},910:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0});var n=r(655);n.__exportStar(r(828),t),n.__exportStar(r(842),t),n.__exportStar(r(543),t),n.__exportStar(r(743),t),n.__exportStar(r(666),t),n.__exportStar(r(629),t),n.__exportStar(r(948),t);var o=r(997);t.FormatError=o.default;var i=r(842);t.Route=i.default;var a=r(543);t.RouteId=a.default;var u=r(743);t.RouteLocation=u.default;var s=r(666);t.RouteLocator=s.default,t.default=s.default},828:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.INCREASE=1]="INCREASE",e[e.DECREASE=2]="DECREASE",e[e.BOTH=3]="BOTH",e[e.RAMP=4]="RAMP",e[e.FT=8]="FT",e[e.TURNBACK=16]="TURNBACK"}(r=t.LrsType||(t.LrsType={})),t.getLrsTypeValue=function(e){var t=null;if("string"==typeof e)if(/^i/i.test(e))t=r.INCREASE;else if(/^d/i.test(e))t=r.DECREASE;else if(/^b/i.test(e))t=r.BOTH;else if(/^r/i.test(e))t=r.RAMP;else if(/^f/i.test(e))t=r.FT;else{if(!/t/i.test(e))throw new Error("Invalid value: "+e);t=r.TURNBACK}else{if(!("number"==typeof e&&e>=1&&e<=4||8===e||16===e))throw new Error("Invalid value: "+e);t=e}return t}},629:(e,t)=>{var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.SR=0]="SR",e[e.IS=1]="IS",e[e.US=2]="US",e[e.RA=3]="RA",e[e.LC=4]="LC",e[e.FT=5]="FT",e[e.PR=6]="PR",e[e.CN=7]="CN",e[e.TB=8]="TB"}(r=t.RouteTypes||(t.RouteTypes={}));var n=["SR","IS","US","RA","LC","FT","PR","CN","TB"],o=/^(?:(SR)|(IS)|(US)|(RA)|(LC)|(FT)|(PR)|(CN)|(TB))$/i;t.getRouteTypeValue=function(e){var t=null;if("string"==typeof e){var n=e.match(o);n&&(n[1]?t=r.SR:n[2]?t=r.IS:n[3]?t=r.US:n[4]?t=r.RA:n[5]?t=r.LC:n[6]?t=r.FT:n[7]?t=r.PR:n[8]?t=r.CN:n[9]&&(t=r.TB))}else"number"==typeof e&&Math.trunc(e)===e&&e>=0&&e<=8&&(t=e);return t},t.getRouteTypeAbbreviation=function(e){var t;if("number"==typeof e&&e>=0&&e<n.length)t=r[e];else{if("string"!=typeof e||!o.test(e))throw new Error("Invalid value");t=e.toUpperCase()}return t}},948:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.toNumber=function(e,t){var r;if(null==t&&(t="this"),null!=e){if(e=Number(e),isNaN(e))throw new Error("If "+t+" property is provided, it must be a number.");r=e}else if(null===e)return null;return r},t.getActualMonth=function(e){return e.getMonth()+1},t.flattenArray=function e(t){if(null==t)return t;if("object"!=typeof t||!(t instanceof Array))throw new Error("array must be an Array object.");for(var r=[],n=0,o=t.length;n<o;n+=1){var i=t[n];if("object"==typeof i&&i instanceof Array)for(var a=e(i),u=0,s=a.length;u<s;u+=1)r.push(a[u]);else r.push(i)}return r}},254:e=>{e.exports=t},481:t=>{t.exports=e},591:e=>{e.exports=r},701:e=>{e.exports=n}},i={};function a(e){if(i[e])return i[e].exports;var t=i[e]={exports:{}};return o[e](t,t.exports,a),t.exports}return a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a(944)})()));
//# sourceMappingURL=main.js.map